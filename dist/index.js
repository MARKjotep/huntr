var fr=Object.defineProperty;var gr=(n,r)=>{for(var i in r)fr(n,i,{get:r[i],enumerable:!0,configurable:!0,set:(t)=>r[i]=()=>t})};var Cn={};gr(Cn,{isWindow:()=>P,isUndefined:()=>Er,isStr:()=>I,isPromise:()=>sr,isPlainObject:()=>Y,isObject:()=>mr,isObj:()=>y,isNumber:()=>j,isNum:()=>$n,isNull:()=>v,isNotWindow:()=>b,isNotNull:()=>$r,isInt:()=>En,isFN:()=>L,isDefined:()=>Cr,isClassOrId:()=>xr,isBool:()=>R,isAsync:()=>Tr,isArraybuff:()=>hr,isArr:()=>s});var L=(n)=>typeof n==="function",Tr=(n)=>n.constructor.name==="AsyncFunction",sr=(n)=>!!n&&typeof n.then==="function",j=(n)=>{return!isNaN(parseFloat(n))&&isFinite(n)},mr=(n)=>{return n&&typeof n==="object"&&!Array.isArray(n)},Y=(n)=>{return typeof n==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype&&!Array.isArray(n)},hr=(n)=>{return n instanceof Uint8Array||n instanceof ArrayBuffer||typeof n==="string"},xr=(n)=>{return n.startsWith(".")||n.startsWith("#")},R=(n)=>typeof n==="boolean",I=(n)=>typeof n==="string",s=(n)=>Array.isArray(n),y=(n)=>typeof n==="object",$n=(n)=>typeof n==="number",v=(n)=>n===null,$r=(n)=>n===null,Er=(n)=>typeof n==="undefined",Cr=(n)=>typeof n!=="undefined",En=(n)=>{return Number.isInteger(Number(n))},P=typeof window!=="undefined",b=typeof window==="undefined";function Kn(n,r){$(r).forEach(([i,t])=>{Wn(n,i,{value:t,writable:!1,configurable:!1,enumerable:!0})})}var Hn=(n)=>{return s(n)?n:[n]};class V{static set i(n){console.info(...Hn(n))}static set e(n){console.error(...Hn(n))}static set w(n){console.warn(...Hn(n))}}class Z{_c=0;_id="";constructor(n){if(this._c=0,this._id=n??C(5),n?.includes("-")){let[r,i]=[n.split("-").slice(0,-1).join("-"),n.split("-").slice(-1)[0]];this._id=r,this._c=j(i)?parseInt(i):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var Hr=(n)=>Array.from({length:n},(r,i)=>i),jn="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Rn="abcdefghijklmnopqrstuvwxyz";var M=(n)=>JSON.stringify(n),In=(n)=>{return JSON.parse(n)};var X=(n)=>{if(n.startsWith("webkit"))n="-"+n;return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},C=(n)=>{let r=jn+Rn,i=Hr(10).join("");return Array.from({length:n},(t,o)=>r+(o?i:"")).reduce((t,o)=>{return t+=o.charAt(Math.floor(Math.random()*o.length))},"")},Sr=(n=6,r)=>{if(!r)return Math.floor(Math.random()*n);return Math.round(Math.random()*(r-n)+n)},Pn=()=>{let n=[...jn,...Rn],r=Sr(0,n.length);return n[r]};var Vn=(n,r)=>{let i=r==="/"?"":r;if(r.startsWith("#"))return n+r;return r.startsWith("/")?n+i:r};class m extends Map{obj(n){n&&$(n).forEach(([r,i])=>this.set(r,i))}map(n){n.forEach((r,i)=>{if(r instanceof m)this.set(i,r);else if(s(r)){if(this.lacks(i))this.set(i,[]);this.get(i).push(...r)}else if(y(r))this.ass(i,r);else this.set(i,r)})}ass(n,r){if(!this.has(n))this.set(n,{});H(this.get(n),r)}lacks(n){return!this.has(n)}init(n,r){return this.has(n)?this.get(n):this.set(n,r).get(n)}}var{values:N,keys:D,entries:$}=Object;var{defineProperty:Wn,assign:H}=Object,Nn=(n,r)=>Object.hasOwn(n,r),J=(n)=>{return Object.keys(n).length},nn=(n,r)=>{if(!r.has(n))r.set(n,new m);return r.get(n)},O=(n,r)=>{if(!r.has(n))r.set(n,[]);return r.get(n)},Sn=(n,r)=>{let i={added:{},removed:{},modified:{}},t=D(n),o=D(r);for(let u of o){let g=n[u],f=r[u];if(!(u in n))i.added[u]=f;else if(s(g)&&s(f)){if(M(g)!==M(f))i.modified[u]={old:g,new:f}}else if(y(g)&&y(f)&&!v(g)&&!v(f)){let T=Sn(g,f);if(J(T.added)||J(T.removed)||J(T.modified))i.modified[u]={old:g,new:f}}else if(g!==f)i.modified[u]={old:g,new:f}}for(let u of t)if(!(u in r))i.removed[u]=n[u];return i};function On(n,r){if(n.size!==r.size)return!1;for(let i of n)if(!r.has(i))return!1;return!0}var ln=(n)=>{return N(n).some((r)=>{return J(r)})};var B=(n,r)=>{return{name:n,content:r}},br=(n,r)=>{return{property:n,content:r}},Zr=(n,r)=>{return{"http-equiv":n,content:r}};class l{metas=[];constructor(n){n&&this.metas.push(B("description",n))}author(n){return this.meta=B("author",n),this}charset(n){return this.meta={charset:n},this}keywords(...n){return this.meta=B("keywords",n.join(", ")),this}viewport(n){let r=$(n).map(([i,t])=>[X(i),String(t)].join("="));return this.meta=B("viewport",r.join(", ")),this}httpEquiv(n){return $(n).forEach(([r,i])=>{this.meta=Zr(X(r),String(i))}),this}robots(...n){return this.meta=B("robots",n.join(", ")),this}themeColor(n){return this.meta=B("theme-color",n),this}openGraph(n){return $(n).forEach(([r,i])=>{this.meta=br("og:"+r,String(i))}),this}twitter(n){return $(n).forEach(([r,i])=>{this.meta=B("twitter:"+r,String(i))}),this}push(n){this.metas.unshift(...n)}set meta(n){this.metas.push(n)}}class Zn{title;description;base;meta;link;script;css}var Lr=["charset","name","property","http-equiv"],pn=(n,r)=>{r.forEach((i)=>{for(let t of Lr)if(t in i){let o=i[t];n[`${t}_${t==="charset"?"":o}`]=i}})},yr=(n,r)=>{r.forEach((i)=>{if("href"in i){let t=i.href;n[`${t}`]=i}})};class A{_head;idm;constructor(n){this._head=new m(n)}set head(n){$(n).forEach(([r,i])=>{if(r==="title"||r==="base"){if(i!==void 0)this._head.set(r,i);return}if(i instanceof l)return pn(this._head.init("meta",{}),i.metas);if(!s(i))return;switch(r){case"meta":return pn(this._head.init("meta",{}),i);case"link":return yr(this._head.init("link",{}),i);case"script":if(i.length){this._head.init(r,[]);let t=i.map((o)=>{if(!o.yid&&this.idm)o.yid="sc"+this.idm.mid;return o});this._head.get(r).push(...t)}return}})}get head(){return this._head}set id(n){this.idm=new Z(n)}}var bn=(n)=>{return $(n??{}).reduce((r,[i,t])=>{return r.push(R(t)&&t?i:`${i}="${t}"`),r},[""]).join(" ")},_n=(n)=>{let r=new Set;if(!n)return"";let i=[...n].reduce((t,[o,u])=>{if(o==="meta"||o==="link")u=N(u);if(I(u)){if(o==="title")r.add(`<${o}>${u}</${o}>`);else t.add(`<${o}>${u}</${o}>`);return t}if(!s(u))return t;if(o==="base"){let f=u.slice(-1);if(f)return r.add(`<${o}${bn(f[0])}>`),t}return u.map((f)=>{if(o==="script"){let T={...f},h="";if("importmap"in T)T.type="importmap",h=JSON.stringify(T.importmap),delete T.importmap;else if("body"in T)h=T.body,delete T.body;return`<${o}${bn(T)}>${h}</${o}>`}return`<${o}${bn(f)}>`}).forEach((f)=>{if(f.includes('type="module"'))r.add(f);else if(f.includes("<meta"))r.add(f);else t.add(f)}),t},new Set);return[...r,...i].join("")};class Ln{lang="en";htmlHead;head;constructor(){this.htmlHead=new m,this.head=(n={})=>{let r=new A(this.htmlHead),{css:i,description:t,...o}=n;if(t)r.head={meta:[{name:"description",content:t}]};if(i){let g=(s(i)?i:[i]).map((f)=>({rel:"preload stylesheet",href:f,as:"style"}));r.head={link:[...g]}}r.head=o,this.htmlHead=r.head}}}var Mr=(n)=>{if(b)return;return new Promise((r,i)=>{let t=null;if(n.href)t=document.querySelector(`link[href="${n.href}"]`);if(t){r(t);return}let o=document.createElement("link");if(n.rel!=="stylesheet")n.rel="stylesheet",n.as="style";$(n).forEach(([u,g])=>{o.setAttribute(u,g)}),o.onload=()=>r(o),o.onerror=()=>i(new Error("Failed to load CSS")),document.head.appendChild(o)})};var Yr=()=>{let r=document.querySelector("#d-css")?.sheet;if(r)return r;let i=document.createElement("style");return i.id="d-css",document.head.appendChild(i),i.sheet},Xr=(n,r)=>{for(let i=0;i<n.cssRules.length;i++)if(n.cssRules[i].selectorText===r)return!0;return!1},qr=(n)=>Object.entries(n).map(([r,i])=>`${X(r)}: ${i};`).join(" ");function Gr(n,r={}){if(b)return;let i=Yr();if(!i)return;if(!Xr(i,n))i.insertRule(`${n} { ${qr(r)} }`,i.cssRules.length)}var cn=(n,r=!1)=>{if(j(n))return[+n,En(n)?"int":"float"];if(r&&/\.\w+$/.test(n))return[n,"file"];if(n==="/")return[n,"-"];if(n.length===36&&n.match(/\-/g)?.length===4)return[n,"uuid"];return[n,"string"]},rn=(n)=>{let r=n.startsWith("/")?n:"/"+n,i=r.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[t,o]=i.reduce(([u,g],f)=>{if(f.includes("<")){let T=f.match(/(?<=<)[^/].*?(?=>|$)/g);if(T?.length){let[h,x]=T[0].split(":");if(h)u.push(h),g.push(x||"_")}}else u.push(f===">"?"/":f);return[u,g]},[[],[]]);if(r.endsWith("/")&&r.length>1)t.push("/");return{parsed:t,args:o}};class tn{storage;constructor(){this.storage=new m}cache(n,r){if(this.storage.lacks(n))this.storage.set(n,r());return this.storage.get(n)}}var Ur=["int","float","file","uuid","string"];class w{_storage;CC;constructor(){this._storage=new m,this.CC=new tn}set(n){let{parsed:r,path:i}=n,t=M(r);if(!this._storage.get(t))this._storage.set(t,n);else throw`path: ${i} already used.`}get(n){let{parsed:r}=this.CC.cache(n,()=>rn(n)),i={},t=this._storage.get(M(r));if(!t&&n!=="/")for(let o of this._storage.keys()){let u=[],g=In(o);if(r.length===g.length){let f=g.map((x,S)=>{let E=cn(r[S],r.length-1===S);if(x===E[0])return E[0];if(Ur.includes(E[1]))return u.push(E[0]),E[1];return x}),T=M(f);if(this._storage.has(T)){t=this._storage.get(T),t?.args.forEach((x,S)=>{i[x]=u[S]});break}}}return[t,i]}}class on{path="";parsed=[];args=[];constructor(n){Kn(this,{path:n,...rn(n)})}}class yn{date;constructor(n){this.date=n?new Date(n):new Date}delta(n=null,r=!1){let i=yn.delta(this.date.getTime(),n);return r?new Date(i):i}timed(n){if(!n)return this.date;return[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"]].reduce((i,[t,o])=>{let u=n[t];return u?new Date(i[`set${o}`](i[`get${o}`]()+u)):i},new Date(this.date))}static delta(n,r=null){return r?r-n:n-Date.now()}static local(n){return new Date(n).toLocaleString()}static get now(){return Date.now()}}class Mn{static rand(n=6,r){if(r)return Math.floor(Math.random()*(r-n+1)+n);return Math.floor(Math.random()*n)+1-1}static fill(n,r=null){return Array(n).fill(r)}static new({dom:n,id:r,inner:i}){let t=document.createElement(n);if(r)t.id=r;if(i)t.innerHTML=i;return t}static randFrom(n){if(Array.isArray(n)){let r=n.length,i=this.rand(0,r-1);return n[i]}else if(typeof n=="object"){let r=D(n),i=r.length,t=this.rand(0,i-1);return r[t]}}static randArray(n=[],r=1,i=!1){let t=[],o=i?new Set:null;while((i?o.size:t.length)<r){let u=n[Mn.rand(0,n.length-1)];i?o.add(u):t.push(u)}return i?[...o]:t}static randomAZ=Pn;static makeID=C;static class(n,...r){let i=r;if(n?.class)i.push(...s(n.class)?n.class:[n.class]);n.class=r}static get O(){return{vals:N,keys:D,items:$,has:Nn,ass:H,len:(n={})=>D(n).length}}static get is(){return Cn}static get return(){return en}static sleep=(n=1000)=>new Promise((r)=>setTimeout(r,n));static get screen(){let{innerWidth:n}=window,r={xs:n<=480,sm:n>=480,smd:n>=624,md:n>=768,lg:n>=1024,xl:n>=1280,xxl:n>=1536},i=$(r).reverse();for(let t=0;t<i.length;t++){let[o,u]=i[t];if(u)return o}return}bytes(n){if(n===0)return"0 Bytes";let r=1024,i=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(r));return parseFloat((n/Math.pow(r,t)).toFixed(2))+" "+i[t]}static format(n){return new dn(n)}}class en{static arr(n){return n?s(n)?n:[n]:[]}static num(n,r=0){let i=parseFloat(n);return isNaN(i)?r:i}static str(n){return String(n)}static arr2obj(n,r=!1){return n.reduce((i,t,o)=>{if(r)i[t]=o;else i[o]=t;return i},{})}}class dn{val;constructor(n){this.val=n}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}function un(n,r,{id:i="stateHook",init:t}={}){if(b)return()=>{};let o=[],u=()=>r.map((f)=>f.value),g=()=>{n(...u())};if(r.forEach((f)=>{o.push(f.hook(g)(i))}),t)g();return()=>{o.forEach((f)=>f())}}var kn=(n)=>{n.forEach((r)=>r())};var Fr=(n,r)=>{for(let[i,t]of n){let o=K(i);if(!o){n.delete(i);continue}t.forEach((u)=>{u.call(o,r)})}};class q extends EventTarget{options;deep;verify;hooks=new m;states=new m;_value;listening=!1;end;constructor(n,r={},i=!0,t=!0){super();this.options=r;this.deep=i;this.verify=t;this._value=n}get value(){return this._value}set value(n){if(!this.verify){this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(Y(this._value)||s(this._value)){let r=Sn(this._value,n);if(!ln(r))return}else if(this._value instanceof Set){if(!On(this._value,n))return}else if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let n=(r)=>{if(kn(this.hooks),Fr(this.states,r.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",n,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",n,this.options),this.end=void 0,this.listening=!1}}call(n,r){return(i)=>{if(nn(i,this.states).set(r,n),!b&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(i))this.states.get(i)?.delete(r)}}}hook(n){return(r)=>{if(this.hooks.set(r,n),!b&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(r))this.hooks.delete(r)}}}}function p(n,r={}){return new q(n,r,!0)}function Jr(n,r=!1){return new q(n,{},!1,r)}class Yn{e;opt;constructor(n){this.e=n;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(n,r={}){return this.e.animate(n,r)}get slide(){let n=({x:r=0,y:i=0},t={})=>{H(this.opt,t);let o=[[r,i],[0,0]].map(([u,g])=>({transform:`translateX(${u}rem) translateY(${g}rem)`}));return this.e.animate(o,this.opt),this};return{left:(r={})=>{return n({x:-2},r)},right:(r={})=>{return n({x:2},r)},up:(r={})=>{return n({y:2},r)},down:(r={})=>{return n({y:-2},r)}}}fade(n={}){H(this.opt,n);let r=[0,1].map((i)=>({opacity:i}));return this.e.animate(r,this.opt),this}shake(n="Y",r={}){H(this.opt,r);let i=[0,5,-5,5,0].map((t)=>({transform:`translate${n}(${t}px)`}));return this.e.animate(i,this.opt),this}color(n=[],r={}){H(this.opt,r);let i=Array.isArray(n)?n.map((t)=>({color:t})):{color:n};return this.e.animate(i,this.opt),this}bg(n=[],r={}){H(this.opt,r);let i=Array.isArray(n)?n.map((t)=>({backgroundColor:t})):{backgroundColor:n};return this.e.animate(i,this.opt),this}bounce(n=1,r={}){H(this.opt,r);let i=[0.5,n,1].map((t)=>({transform:`scale(${t})`}));return this.e.animate(i),this}}var _=(n)=>{if(s(n))return n.filter((r)=>r!==void 0).join(" ");else if(y(n)){if(Y(n))return M(n)}else if(L(n))return _(n());else if(n!==void 0&&n!==null)return R(n)?n?"":"false":String(n);return""};function Qr(n,r){switch(r??n){case"style":return function(i){this.style.setProperty(n,i)};default:return function(i){this.setAttribute(n,i)}}}class Xn{attr;constructor(n={}){this.attr=n}get(n,r=this.attr,i){let t=(o,u)=>{if(s(u))n.attr_push(o,_(u),i);else if(u instanceof q){let g=i?`${i}_${o}`:o;n.states.push(u.call(Qr(o,i),g)),t(o,u.value)}else if(y(u)){if(Y(u)&&!i)this.get(n,u,o)}else n.attr_push(o,_(u),i)};$(r).forEach(([o,u])=>{if(o==="ref"){if(u instanceof c)n.events.obj({element(){u.element=this}})}else if(["on"].includes(o))y(r.on)&&n.events.obj(r.on);else{if(u===void 0)return;t(o,u)}})}unload(n){let r=void 0;if(n in this.attr)r=this.attr[n],delete this.attr[n];return r}}class qn extends on{id;cls;constructor(n,r,i){super(n);this.id=r;this.cls=i}}class fn extends qn{}class an extends qn{}class vn{storage=new w;errorStorage=new w;wssStorage=new w;constructor(){}getRoute(n){return this.storage.get(n)}getWss(n){return this.wssStorage.get(n)}getError(n){return this.errorStorage.get(n.toString())}}class Gn extends Ln{storage=new vn;base;_root=p([]);path=p("/");lastPath=p("/");route;error;wss;A;constructor(n=""){super();this.base=n?n.startsWith("/")?n:`/${n}`:"",this.route=(r)=>(i)=>{let t=this.base+r;return i.route=t,this.storage.storage.set(new fn(t,C(6),i)),i},this.error=(...r)=>{return(i)=>{if(r.length)r.forEach((t)=>{let o=this.base+t.toString();this.storage.errorStorage.set(new fn(o,C(5),i))});else this.storage.errorStorage.set(new fn("404",C(5),i));return i}},this.wss=(r)=>(i)=>{let t=this.base+r;return i.route=t,this.storage.wssStorage.set(new an(t,C(6),i)),i},this.A=(r,...i)=>{if(this.base){if(r.href&&!String(r.href).startsWith(this.base))r.href=Vn(this.base,r.href.toString())}return Br(r,this.path,this.lastPath,i)}}}function Br(n,r,i,...t){return G("a",{...n,on:{...{click(u){u.preventDefault();let f=z(this).path;i.value=r.value,r.value=f}}}},...t)}class nr{static route="/"}class Un extends Zn{path;args;id;status;import;lang="en";static route="/";_data={};constructor(n,r={},i="",t){super();this.path=n;this.args=r;this.id=i;this.status=t}set data(n){H(this._data,n)}get data(){return this._data}}function rr(n,r={},...i){let t=new A;if(J(r))t.head=r;i.forEach((S)=>{t.head.map(S)});let{link:o,script:u,meta:g,title:f,base:T,description:h,css:x}=n;if(t.head={title:f,base:T,meta:g,link:o,script:u},h)t.head={meta:[{name:"description",content:h}]};if(x){let E=(s(x)?x:[x]).map((Q)=>({rel:"preload stylesheet",as:"style",href:Q}));t.head={link:[...E]}}return t.head}class Fn extends Un{body(){return G("div",{},this.path+" not found...")}}var Rt=new m;class e{app;path;status;cls;lang="en";constructor(n,r,i={},t={},o){this.app=n;this.path=r;this.status=o;this.cls=this.class(r,o),this.cls.data=t}class(n,r){let[i,t]=this.app.storage.getRoute(n);if(i&&!r){let{cls:o,id:u}=i;return new o(n,t,u)}else return zr.call(this.app,n,r||Dr())}async serverHead(n){let r=this.cls;if(r.head)await r.head();return this.lang=this.cls.lang||this.lang,rr(r,n,this.app.htmlHead)}async clientHead(){}async fetch(){let n=this.cls;if(n)try{if(n.fetch){let r=await n.fetch();if(Y(r)&&J(r))n.data=r}}catch(r){V.e=["class fetch: ",r instanceof Error?r.message:""]}}async doc(){let n=this.cls;if(n.import)try{let r=await n.import;if(r.default)n.import=await r.default({...n.args,...n.data});else n.import=void 0}catch(r){return V.e=["import",{error:"loader"}],n.import=void 0,[]}if(n.body){let r=await n.body();return s(r)?r:[r]}if(n.import){let r=n.import;return s(r)?r:[r]}return[]}}function zr(n,r=404){let[i,t]=this.storage.getError(r??0);if(i){let{cls:o,id:u}=i;return new o(n,t,u,r)}else{let o=new Fn(n,t,C(5));return o.title=`error ${r}`,o}}function Dr(){if(P)return parseInt(z('meta[name="error"]')?.attr.get("content")??"200");return 404}class Jn{lang;head="";constructor(n,r){if(this.lang=n,r)this.head=_n(r)}body(n,r,i){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${r??C(5)}"${i?" "+i:""}>${n}</body>`,"</html>"].join("")}}class gn extends Gn{render;load;root;constructor(n={}){let{base:r,pushState:i}=n;super(r);this.render=async(o={})=>{let{id:u,data:g,class:f,lang:T}=o,h={};if(P){let x={},S=window.location.pathname,E=document.body.id,Q=new e(this,S,o,g);this._root.value=await Q.doc();let wn=await ir(this._root,E,f);return U.push(wn.oz),requestAnimationFrame(()=>{U.stage,this.root(E)}),()=>{return}}return async({path:x,data:S={},status:E=0})=>{let Q=C(4),wn=new m,Pr=new A,xn=new e(this,x,o,S,E);if(u)Q=u;let or=await xn.serverHead(h);this._root.value=await xn.doc();let ur=await ir(this._root,Q,f);return new Jn(T||xn.lang,or).body(ur.ctx,Q)}},this.load=async(o)=>{this.path.value=this.base+o},this.root=(o=`Huntr${C(4)}`)=>{return un(async(u)=>{let g=new e(this,u,{},{});await g.fetch(),await g.clientHead(),this._root.value=await g.doc()},[this.path],{id:o}),this._root};let t=this;H(this,{get huntr(){return this}})}}async function ir(n,r,i){let t=new Z(r),o=G("main",{class:i},n);return Tn(o,t)}var Ar=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],wr=(n)=>Ar.includes(n);function Kr(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var sn=(n,r)=>{if(s(n))return n.map((i)=>sn(i,r)).join("");else if(n instanceof W){let{ctx:i,oz:t}=Tn(n,r.IDM);return r.OZ.push(t),i}else if(y(n))return M(n);else if(L(n))return sn(n(),r);else if(n!==void 0&&n!==null)return Kr(n);return""},mn=(n,r)=>{let i=new Z(r),t=new d(i.id,i);return{ctx:sn(n,t),catt:t}};function Wr(n){let r=this.id;if(r){let{ctx:i,catt:t}=mn(n,r);if(this.innerHTML!==i)this.innerHTML=i,U.RPS(t.OZ)}}var Qn=(n,r,i,t=[])=>{if(s(n))n.forEach((o)=>{Qn(o,n.length,i,t)});else if(n instanceof q)if(r>1)Qn(G("div",{},n),r,i,t);else{let o=n.value,u=o instanceof W?"dom":"ctx",{ctx:g,catt:f}=mn(o,i.xid+"-0");i.xid=f.xid,t.push(g),i.OZ.push(f.OZ),i.states.push(n.call(Wr,u))}else if(n instanceof gn);else t.push(sn(n,i))};class Bn{tag;ctx;closing;constructor(n="",r){this.tag=n;this.ctx=r;let i=wr(n);this.closing=i?"":`</${n}>`}process(n,r=this.ctx,i=[]){return r.forEach((t)=>{Qn(t,r.length,n,i)}),i.join("")}get(n){let r=this.process(n);if(!this.tag)return r;if(n.events.size||n.states.length)n.id=n.xid;return`<${this.tag}${n.attr}>${r}${this.closing}`}}class An{e;query;constructor(n,r){this.e=n;this.query=r}get a(){return new Yn(this)}get all(){if(this.query){let n=document.querySelectorAll(this.query);if(n.length)return Array.from(n).map((r)=>r)}return[]}get attr(){let n=this.e;return{has:(r)=>{return n.hasAttribute(r)},get:(r)=>{return n.getAttribute(r)},del:(r)=>{return n.removeAttribute(r),this},set:(r)=>{for(let i in r){let t=r[i];if(r[i]!==void 0)n.setAttribute(i,_(t))}return this}}}get children(){return Array.from(this.e.children).map((n)=>z(n))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let n=this.e.offsetParent;if(n)return new F(n);return}get parent(){let n=this.e.parentElement;if(n)return new F(n);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let n=this.e.style,r=this;return{set:(i,t=0)=>{let o=n,u=()=>{$(i).forEach(([g,f])=>{if(g in o){if(o[g]!==f)o[g]=f}else if(f!==null)n.setProperty(g,String(f))})};if(L(t))r.on("transitionend",t);if($n(t))setTimeout(u,t);else u();return r},get:(i)=>{let t=X(String(i));return n.getPropertyValue(t)},del:(...i)=>{i.forEach((t)=>{let o=X(String(t));n.removeProperty(o)})}}}get submit(){let n=this.e;if("submit"in n)return n.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(n){let{ctx:r,oz:i}=zn(n,Dn(this.id));this.e.insertAdjacentHTML("beforeend",r),U.RPS(i)}set appendfirst(n){let{ctx:r,oz:i}=zn(n,Dn(this.id));this.e.insertAdjacentHTML("afterbegin",r),U.RPS(i)}set inner(n){let{ctx:r,oz:i}=zn(n,Dn(this.id));this.e.innerHTML=r,U.RPS(i)}set disabled(n){let r=this.e;if("disabled"in r)r.disabled=n}set id(n){this.e.id=n}set value(n){let r=this.e;r.value=n}}var zn=(n,r)=>{let{ctx:i,catt:t}=mn(n,r);return{ctx:i,oz:t.OZ}},Dn=(n)=>n?`${n}-0`:n;class F extends An{constructor(n,r){super(n,r)}add(...n){return this.e.classList.add(...n.map((r)=>r.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...n.map((r)=>r.replace(/[^\w-]/,"")))}}remove(...n){return this.e.classList.remove(...n.map((r)=>r.replace(/[^\w-]/,""))),this}toggle(n,r){let i=typeof n!="string"?n.apply(this):n;return this.e.classList.toggle(i,r)}hasNode(n){return this.e.contains(n)}has(...n){let r=this.e.classList;return n.every((i)=>r.contains(i))}insert(n){return{HTML:(...r)=>{return r.forEach((i)=>{this.e.insertAdjacentHTML(n,i)}),this},element:(...r)=>{return r.forEach((i)=>{this.e.insertAdjacentElement(n,i)}),this},text:function(...r){return r.forEach((i)=>{this.e.insertAdjacentText(n,i)}),this}}}is(n){let r=this.e.classList,i=this.e.tagName.toLocaleLowerCase(),t=!0,o=!0;if(n.dom)o=n.dom==i?!0:!1;if(n.class)if(Array.isArray(n.class))n.class.forEach((u)=>{t=t?r.contains(u):!1});else t=t?r.contains(n.class):!1;return t&&o}on(n,r,i=!1){let t=!1;if(n.indexOf("touch")>-1)t=!0;return this.e.addEventListener(n,r,{capture:i,passive:t}),this}remove_on(n,r,i=!1){return this.e.removeEventListener(n,r,i),this}timed(n,r=250){return setTimeout(()=>n(this),r),this}animate(n,r,i){let t={duration:300,easing:"ease",fill:"forwards"};if(L(r))i=r;else H(t,r);let o=this.e.animate(n,t);if(i)o.finished.then(i);return this}}var k=new m,K=(n)=>{if(b)return;let r=k.get(n);if(r?.isConnected)return r;k.delete(n);let i=document.getElementById(n);if(!i)return;return k.set(n,i),i};function tr(){let n=[];for(let[r,i]of k)if(!i.isConnected)n.push(r),k.delete(r);return n}function z(n,r){let i=r?r:document;if(I(n)){let t=i.querySelector(n);if(t)return new F(t,n);return}else if(Y(n)){let[[t,o]]=$(n),g=`${t==="id"?"#":"."}${o}`,f=i.querySelector(g);if(f)return new F(f,g);return}else return new F(n)}class c{state=new q(void 0);constructor(){}get element(){return this.state.value?.e}set element(n){if(n)this.state.value=new F(n);else this.state.value=void 0}get $(){return this.state.value}}var jr=()=>{return new c};var Rr=(n,r,i)=>{return n.addEventListener(r,i),()=>{n.removeEventListener(r,i)}},a={};class hn{events=new m;states=new m;windowEvents=new m;resetST=new m;resetEV=new m;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(n){let{id:r,events:i,states:t}=n;if(r){if(i.size)this.events.set(r,i);if(t.length)this.states.set(r,t)}return this}push(n){return n.events.forEach((r,i)=>{r.forEach((t,o)=>{nn(i,this.events).set(o,t)})}),n.states.forEach((r,i)=>{O(i,this.states).push(...r)}),this}get stage(){return this.events.forEach((n,r)=>{this.events.delete(r);let i=K(r);if(!i){this.events.delete(r);return}n.forEach((t,o)=>{switch(o){case"ready":case"element":t.apply(i,[i]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let u=o.replace(/^win/,"");this.windowEvents.init(u,new m).set(r,t);break;case"state":let[g,f,T]=t.apply(i,[i]),h=s(f)?f:[f];if(!h.length)break;let x=()=>h.map((E)=>E.value),S=()=>g(...x());if(T)S();h.forEach((E)=>O(r,this.resetST).push(E.call(S,r+"_state")(r)));break;default:O(r,this.resetEV).push(Rr(i,o,t))}})}),this.processWindowEvents,this.states.forEach((n,r)=>{this.states.delete(r),n.forEach((i)=>{O(r,this.resetST).push(i(r))})}),this}get processWindowEvents(){let n=(r,i)=>{let t=0,o=!1,u=(f)=>{if(t=window.scrollY,!o)window.requestAnimationFrame(()=>{i.forEach((T,h)=>{let x=K(h);if(x)T.call(x,f);else this.windowEvents.get(r)?.delete(h)}),o=!1}),o=!0},g=(f)=>{i.forEach((T,h)=>{let x=K(h);if(x)T.call(x,f);else this.windowEvents.get(r)?.delete(h)})};return window.addEventListener(r,r==="scroll"?u:g),()=>{window.removeEventListener(r,r==="scroll"?u:g)}};return this.windowEvents.forEach((r,i)=>{if(r.size){if(!a[i])a[i]=n(i,r)}else if(a[i])a[i](),delete a[i]}),this}reset(n){return n.forEach((r)=>{this.windowEvents.forEach((i,t)=>{if(i.has(r))i.delete(r)}),this.resetEV.get(r)?.forEach((i)=>{i()}),this.resetST.get(r)?.forEach((i)=>{i()}),this.resetST.delete(r),this.resetEV.delete(r)}),this}RPS(n){if(n){let r=tr();this.reset(r);let i=n.keys;if(i.length)this.reset(i).push(n).stage}return this}}var U=new hn;class d{xid;IDM;map=new m;states=[];events=new m;OZ;constructor(n,r=new Z,i){this.xid=n;this.IDM=r;this.OZ=i??new hn}attr_push(n,r,i){let t=i??n;if(!this.map.has(t))this.map.set(t,[]);let o=i?`${X(n)}:${r};`:r;this.map.get(t).push(o)}get attr(){let n=[""];return this.map.forEach((r,i)=>{let t=r.join("");n.push(t?`${i}="${t}"`:i)}),n.join(" ")}set id(n){if(!this.map.has("id"))this.map.set("id",[n])}get id(){return this.map.get("id")?.join("")}}function Tn(n,r=new Z){let{tag:i,attr:t,ctx:o}=n,u=r instanceof Z?r:new Z(r),g=u.mid,f=new d(g,u),T=new Xn(t),h=new Bn(i,o);return T.get(f),{ctx:h.get(f),oz:f.OZ.set(f),id:f.id}}class W{tag;attr;ctx;constructor(n,r,i){this.tag=n;this.attr=r;this.ctx=i}}function G(n,r={},...i){if(L(n))return n(r??{},...i);return new W(n,r??{},i)}var Ir=(n,...r)=>new W("",{},r);var fu=(n)=>{if(b)return;return n()};export{nr as websocket,jr as useRef,V as log,Ir as frag,G as dom,Un as doc,Mr as cssLoader,Gr as addCSS,Mn as __,yn as Time,q as Stateful,un as StateHook,p as State,c as Ref,Jr as QState,l as Meta,fu as IfClient,gn as Huntr,z as $};

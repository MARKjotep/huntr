var Ut=Object.defineProperty;var Yt=(n,t)=>{for(var r in t)Ut(n,r,{get:t[r],enumerable:!0,configurable:!0,set:(o)=>t[r]=()=>o})};var Q=function(n,t,r,o){var i=arguments.length,f=i<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")f=Reflect.decorate(n,t,r,o);else for(var m=n.length-1;m>=0;m--)if(u=n[m])f=(i<3?u(f):i>3?u(t,r,f):u(t,r))||f;return i>3&&f&&Object.defineProperty(t,r,f),f};var x=(n,t)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(n,t)};var Zn={};Yt(Zn,{isWindow:()=>Ln,isUndefined:()=>jt,isStr:()=>p,isPromise:()=>Xt,isPlainObject:()=>C,isObject:()=>Jt,isObj:()=>U,isNumber:()=>O,isNum:()=>yn,isNull:()=>on,isNotWindow:()=>L,isNotNull:()=>St,isModule:()=>Hn,isInt:()=>En,isFN:()=>Z,isDefined:()=>Dt,isClassOrId:()=>Ft,isBool:()=>N,isAsync:()=>Gt,isArraybuff:()=>Bt,isArr:()=>h});var Z=(n)=>typeof n==="function",Gt=(n)=>n.constructor.name==="AsyncFunction",Xt=(n)=>!!n&&typeof n.then==="function",O=(n)=>{return!isNaN(parseFloat(n))&&isFinite(n)},Jt=(n)=>{return n&&typeof n==="object"&&!Array.isArray(n)},C=(n)=>{return typeof n==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype&&!Array.isArray(n)},Hn=(n)=>{return n&&typeof n==="object"&&n[Symbol.toStringTag]==="Module"},Bt=(n)=>{return n instanceof Uint8Array||n instanceof ArrayBuffer||typeof n==="string"},Ft=(n)=>{return n.startsWith(".")||n.startsWith("#")},N=(n)=>typeof n==="boolean",p=(n)=>typeof n==="string",h=(n)=>Array.isArray(n),U=(n)=>typeof n==="object",yn=(n)=>typeof n==="number",on=(n)=>n===null,St=(n)=>n===null,jt=(n)=>typeof n==="undefined",Dt=(n)=>typeof n!=="undefined",En=(n)=>{return Number.isInteger(Number(n))},Ln=typeof window!=="undefined",L=typeof window==="undefined";var Ct=(n)=>{if(L)return;return n()};function Nn(n,t){b(t).forEach(([r,o])=>{pn(n,r,{value:o,writable:!1,configurable:!1,enumerable:!0})})}var Mn=(n)=>{return h(n)?n:[n]};class A{static set i(n){console.info(...Mn(n))}static set e(n){console.error(...Mn(n))}static set w(n){console.warn(...Mn(n))}}class q{_c=0;_id="";constructor(n){if(this._c=0,this._id=n??R(5),n?.includes("-")){let[t,r]=[n.split("-").slice(0,-1).join("-"),n.split("-").slice(-1)[0]];this._id=t,this._c=O(r)?parseInt(r):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var Rt=(n)=>Array.from({length:n},(t,r)=>r),_n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",cn="abcdefghijklmnopqrstuvwxyz";var Y=(n)=>JSON.stringify(n),dn=(n)=>{return JSON.parse(n)};var J=(n)=>{if(n.startsWith("webkit"))n="-"+n;return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},R=(n)=>{let t=_n+cn,r=Rt(10).join("");return Array.from({length:n},(o,i)=>t+(i?r:"")).reduce((o,i)=>{return o+=i.charAt(Math.floor(Math.random()*i.length))},"")},st=(n=6,t)=>{if(!t)return Math.floor(Math.random()*n);return Math.round(Math.random()*(t-n)+n)},en=()=>{let n=[..._n,...cn],t=st(0,n.length);return n[t]};class $ extends Map{obj(n){n&&b(n).forEach(([t,r])=>this.set(t,r))}map(n){n.forEach((t,r)=>{if(t instanceof $)this.set(r,t);else if(h(t)){if(this.lacks(r))this.set(r,[]);this.get(r).push(...t)}else if(U(t))this.ass(r,t);else this.set(r,t)})}ass(n,t){if(!this.has(n))this.set(n,{});T(this.get(n),t)}lacks(n){return!this.has(n)}init(n,t){return this.has(n)?this.get(n):this.set(n,t).get(n)}}var{values:G,keys:W,entries:b}=Object;var{defineProperty:pn,assign:T}=Object,an=(n,t)=>Object.hasOwn(n,t),s=(n)=>{return Object.keys(n).length},fn=(n,t)=>{if(!t.has(n))t.set(n,new $);return t.get(n)},_=(n,t)=>{if(!t.has(n))t.set(n,[]);return t.get(n)},qn=(n,t)=>{let r={added:{},removed:{},modified:{}},o=W(n),i=W(t);for(let f of i){let u=n[f],m=t[f];if(!(f in n))r.added[f]=m;else if(h(u)&&h(m)){if(Y(u)!==Y(m))r.modified[f]={old:u,new:m}}else if(U(u)&&U(m)&&!on(u)&&!on(m)){let g=qn(u,m);if(s(g.added)||s(g.removed)||s(g.modified))r.modified[f]={old:u,new:m}}else if(u!==m)r.modified[f]={old:u,new:m}}for(let f of o)if(!(f in t))r.removed[f]=n[f];return r};function kn(n,t){if(n.size!==t.size)return!1;for(let r of n)if(!t.has(r))return!1;return!0}var vn=(n)=>{return G(n).some((t)=>{return s(t)})};var X=(n,t,r)=>{let o=r.value;return{configurable:!0,get(){if(this===n.constructor.prototype)return o;let i=o.bind(this);return Object.defineProperty(this,t,{value:i,configurable:!0,writable:!0}),i}}};var I=(n,t)=>{return{name:n,content:t}},zt=(n,t)=>{return{property:n,content:t}},It=(n,t)=>{return{"http-equiv":n,content:t}};class c{metas=[];constructor(n){n&&this.metas.push(I("description",n))}author(n){return this.meta=I("author",n),this}charset(n){return this.meta={charset:n},this}keywords(...n){return this.meta=I("keywords",n.join(", ")),this}viewport(n){let t=b(n).map(([r,o])=>[J(r),String(o)].join("="));return this.meta=I("viewport",t.join(", ")),this}httpEquiv(n){return b(n).forEach(([t,r])=>{this.meta=It(J(t),String(r))}),this}robots(...n){return this.meta=I("robots",n.join(", ")),this}themeColor(n){return this.meta=I("theme-color",n),this}openGraph(n){return b(n).forEach(([t,r])=>{this.meta=zt("og:"+t,String(r))}),this}twitter(n){return b(n).forEach(([t,r])=>{this.meta=I("twitter:"+t,String(r))}),this}push(n){this.metas.unshift(...n)}set meta(n){this.metas.push(n)}}class Un{}var At=["charset","name","property","http-equiv"],nt=(n,t,r=!1,o={})=>{t.forEach((i)=>{for(let f of At)if(f in i){let u=i[f];if(r)T(i,{x:!0});else if(!("x"in i))T(i,o);n[`${f}_${f==="charset"?"":u}`]=i}})},Wt=(n,t,r=!1,o={})=>{t.forEach((i)=>{if("href"in i){let f=i.href;if(r)T(i,{x:!0});else if(!("x"in i))T(i,o);n[`${f}`]=i}})};class tt{_head;idm;mark;push;constructor({initial:n,mark:t,push:r}={}){this._head=new $(n),this.mark=t||!1,this.push=r||{}}set head(n){b(n).forEach(([t,r])=>{if(t==="title"||t==="base"){if(r!==void 0){if(t=="base"){if(this.mark)T(r[0]||{},{x:!0})}this._head.set(t,r)}return}if(r instanceof c)return nt(this._head.init("meta",{}),r.metas,this.mark,this.push);if(!h(r))return;switch(t){case"meta":return nt(this._head.init("meta",{}),r,this.mark,this.push);case"link":return Wt(this._head.init("link",{}),r,this.mark,this.push);case"script":if(r.length){this._head.init(t,[]);let o=r.map((i)=>{if(!i.yid&&this.idm)i.yid="sc"+this.idm.mid;if(this.mark)T(i,{x:!0});else if(!("x"in i))T(i,this.push);return i});this._head.get(t).push(...o)}return}})}get head(){return this._head}set id(n){this.idm=new q(n)}}var Qn=(n)=>{return b(n??{}).reduce((t,[r,o])=>{return t.push(N(o)&&o?r:`${r}="${o}"`),t},[""]).join(" ")},rt=(n)=>{let t=new Set;if(!n)return"";let r=[...n].reduce((o,[i,f])=>{if(i==="meta"||i==="link")f=G(f);if(p(f)){if(i==="title")t.add(`<${i}>${f}</${i}>`);else o.add(`<${i}>${f}</${i}>`);return o}if(!h(f))return o;if(i==="base"){let m=f.slice(-1);if(m)return t.add(`<${i}${Qn(m[0])}>`),o}return f.map((m)=>{if(i==="script"){let g={...m},H="";if("importmap"in g)g.type="importmap",H=JSON.stringify(g.importmap),delete g.importmap;else if("body"in g)H=g.body,delete g.body;return`<${i}${Qn(g)}>${H}</${i}>`}return`<${i}${Qn(m)}>`}).forEach((m)=>{if(m.includes('type="module"'))t.add(m);else if(m.includes("<meta"))t.add(m);else o.add(m)}),o},new Set);return[...t,...r].join("")};class d{lang="en";htmlHead;head;constructor({mark:n,push:t}={}){this.htmlHead=new $,this.head=(r={})=>{let o=new tt({initial:this.htmlHead,mark:n,push:t}),{link:i,script:f,meta:u,title:m,description:g,css:H,js:y}=r;if(g)o.head={meta:[{name:"description",content:g}]};if(Kt(o,{css:H,js:y}),"base"in r)o.head={base:r.base};o.head={title:m,meta:u,link:i,script:f},this.htmlHead=o.head}}}var Kt=(n,t)=>{let{css:r,js:o}=t;if(r){let f=(h(r)?r:[r]).map((u)=>({rel:"preload stylesheet",href:u,as:"style"}));n.head={link:[...f]}}if(o){let f=(h(o)?o:[o]).map((u)=>({src:u}));n.head={script:[...f]}}};var Yn=async(n)=>{if(L)return;return new Promise((t,r)=>{let o=document.createElement("link");if(n.rel!=="stylesheet")n.rel="stylesheet",n.as="style";b(n).forEach(([i,f])=>{o.setAttribute(i,f)}),o.onload=()=>t(o),o.onerror=()=>r(new Error("Failed to load CSS")),document.head.appendChild(o)})};var ot=(n)=>{if(L)return;return new Promise((t,r)=>{let o=document.createElement("script"),i="";if("importmap"in n)n.type="importmap",i=JSON.stringify(n.importmap),delete n.importmap;else if("body"in n)i=n.body,delete n.body;if(i)o.textContent=i;b(n).forEach(([f,u])=>{o.setAttribute(f,u)}),o.onload=()=>t(o),o.onerror=()=>r(new Error("Failed to load Script")),document.head.appendChild(o),requestAnimationFrame(()=>t("Script executed"))})},Vt=()=>{let t=document.querySelector("#d-css")?.sheet;if(t)return t;let r=document.createElement("style");return r.id="d-css",document.head.appendChild(r),r.sheet},Pt=(n,t)=>{for(let r=0;r<n.cssRules.length;r++)if(n.cssRules[r].selectorText===t)return!0;return!1},wt=(n)=>Object.entries(n).map(([t,r])=>`${J(t)}: ${r};`).join(" ");function lt(n,t={}){if(L)return;let r=Vt();if(!r)return;if(!Pt(r,n))r.insertRule(`${n} { ${wt(t)} }`,r.cssRules.length)}var it=(n,t=!1)=>{if(O(n))return[+n,En(n)?"int":"float"];if(t&&/\.\w+$/.test(n))return[n,"file"];if(n==="/")return[n,"-"];if(n.length===36&&n.match(/\-/g)?.length===4)return[n,"uuid"];return[n,"string"]},un=(n)=>{let t=n.startsWith("/")?n:"/"+n,r=t.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[o,i]=r.reduce(([f,u],m)=>{if(m.includes("<")){let g=m.match(/(?<=<)[^/].*?(?=>|$)/g);if(g?.length){let[H,y]=g[0].split(":");if(H)f.push(H),u.push(y||"_")}}else f.push(m===">"?"/":m);return[f,u]},[[],[]]);if(t.endsWith("/")&&t.length>1)o.push("/");return{parsed:o,args:i}};class mn{storage;constructor(){this.storage=new $}cache(n,t){if(this.storage.lacks(n))this.storage.set(n,t());return this.storage.get(n)}}var Ot=["int","float","file","uuid","string"];class K{_storage;CC;constructor(){this._storage=new $,this.CC=new mn}set(n){let{parsed:t,path:r}=n,o=Y(t);if(!this._storage.get(o))this._storage.set(o,n);else throw`path: ${r} already used.`}get(n){let{parsed:t}=this.CC.cache(n,()=>un(n)),r={},o=this._storage.get(Y(t));if(!o&&n!=="/")for(let i of this._storage.keys()){let f=[],u=dn(i);if(t.length===u.length){let m=u.map((y,z)=>{let F=it(t[z],t.length-1===z);if(y===F[0])return F[0];if(Ot.includes(F[1]))return f.push(F[0]),F[1];return y}),g=Y(m);if(this._storage.has(g)){o=this._storage.get(g),o?.args.forEach((y,z)=>{r[y]=f[z]});break}}}return[o,r]}}class gn{path="";parsed=[];args=[];constructor(n){Nn(this,{path:n,...un(n)})}}class Gn{date;constructor(n){this.date=n?new Date(n):new Date}delta(n=null,t=!1){let r=Gn.delta(this.date.getTime(),n);return t?new Date(r):r}timed(n){if(!n)return this.date;return[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"]].reduce((r,[o,i])=>{let f=n[o];return f?new Date(r[`set${i}`](r[`get${i}`]()+f)):r},new Date(this.date))}static delta(n,t=null){return t?t-n:n-Date.now()}static local(n){return new Date(n).toLocaleString()}static get now(){return Date.now()}}class Xn{static rand(n=6,t){if(t)return Math.floor(Math.random()*(t-n+1)+n);return Math.floor(Math.random()*n)+1-1}static fill(n,t=null){return Array(n).fill(t)}static new({dom:n,id:t,inner:r}){let o=document.createElement(n);if(t)o.id=t;if(r)o.innerHTML=r;return o}static randFrom(n){if(Array.isArray(n)){let t=n.length,r=this.rand(0,t-1);return n[r]}else if(typeof n=="object"){let t=W(n),r=t.length,o=this.rand(0,r-1);return t[o]}}static randArray(n=[],t=1,r=!1){let o=[],i=r?new Set:null;while((r?i.size:o.length)<t){let f=n[Xn.rand(0,n.length-1)];r?i.add(f):o.push(f)}return r?[...i]:o}static randomAZ=en;static makeID=R;static class(n,...t){let r=t;if(n?.class)r.push(...h(n.class)?n.class:[n.class]);n.class=t}static get O(){return{vals:G,keys:W,items:b,has:an,ass:T,len:(n={})=>W(n).length}}static get is(){return Zn}static get return(){return ft}static sleep=(n=1000)=>new Promise((t)=>setTimeout(t,n));static get screen(){let{innerWidth:n}=window,t={xs:n<=480,sm:n>=480,smd:n>=624,md:n>=768,lg:n>=1024,xl:n>=1280,xxl:n>=1536},r=b(t).reverse();for(let o=0;o<r.length;o++){let[i,f]=r[o];if(f)return i}return}bytes(n){if(n===0)return"0 Bytes";let t=1024,r=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,o)).toFixed(2))+" "+r[o]}static format(n){return new ut(n)}}class ft{static arr(n){return n?h(n)?n:[n]:[]}static num(n,t=0){let r=parseFloat(n);return isNaN(r)?t:r}static str(n){return String(n)}static arr2obj(n,t=!1){return n.reduce((r,o,i)=>{if(t)r[o]=i;else r[i]=o;return r},{})}}class ut{val;constructor(n){this.val=n}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}async function V(n,t,{id:r="stateHook",init:o}={}){let i=[],f=()=>t.map((m)=>m.value),u=async()=>{await n(...f())};if(t.forEach((m)=>{i.push(m.hook(u)(r))}),o)await u();return()=>{i.forEach((m)=>m())}}var mt=(n)=>{n.forEach((t)=>t())};var Nt=(n,t)=>{for(let[r,o]of n){let i=P(r);if(!i){n.delete(r);continue}o.forEach((f)=>{f.call(i,t)})}};class B extends EventTarget{options;deep;verify;hooks=new $;states=new $;_value;listening=!1;end;constructor(n,t={},r=!0,o=!0){super();this.options=t;this.deep=r;this.verify=o;this._value=n}get value(){return this._value}set value(n){if(!this.verify){this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(C(this._value)||h(this._value)){let t=qn(this._value,n);if(!vn(t))return}else if(this._value instanceof Set){if(!kn(this._value,n))return}else if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let n=(t)=>{if(mt(this.hooks),Nt(this.states,t.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",n,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",n,this.options),this.end=void 0,this.listening=!1}}call(n,t){return(r)=>{if(fn(r,this.states).set(t,n),!L&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(r))this.states.get(r)?.delete(t)}}}hook(n){return(t)=>{if(this.hooks.set(t,n),!L&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(t))this.hooks.delete(t)}}}}function S(n,t={}){return new B(n,t,!0)}function pt(n,t=!1){return new B(n,{},!1,t)}class Jn{e;opt;constructor(n){this.e=n;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(n,t={}){return this.e.animate(n,t)}get slide(){let n=({x:t=0,y:r=0},o={})=>{T(this.opt,o);let i=[[t,r],[0,0]].map(([f,u])=>({transform:`translateX(${f}rem) translateY(${u}rem)`}));return this.e.animate(i,this.opt),this};return{left:(t={})=>{return n({x:-2},t)},right:(t={})=>{return n({x:2},t)},up:(t={})=>{return n({y:2},t)},down:(t={})=>{return n({y:-2},t)}}}fade(n={}){T(this.opt,n);let t=[0,1].map((r)=>({opacity:r}));return this.e.animate(t,this.opt),this}shake(n="Y",t={}){T(this.opt,t);let r=[0,5,-5,5,0].map((o)=>({transform:`translate${n}(${o}px)`}));return this.e.animate(r,this.opt),this}color(n=[],t={}){T(this.opt,t);let r=Array.isArray(n)?n.map((o)=>({color:o})):{color:n};return this.e.animate(r,this.opt),this}bg(n=[],t={}){T(this.opt,t);let r=Array.isArray(n)?n.map((o)=>({backgroundColor:o})):{backgroundColor:n};return this.e.animate(r,this.opt),this}bounce(n=1,t={}){T(this.opt,t);let r=[0.5,n,1].map((o)=>({transform:`scale(${o})`}));return this.e.animate(r),this}}var e=(n)=>{if(h(n))return n.filter((t)=>t!==void 0).join(" ");else if(U(n)){if(C(n))return Y(n)}else if(Z(n))return e(n());else if(n!==void 0&&n!==null)return N(n)?n?"":"false":String(n);return""};function _t(n,t){switch(t??n){case"style":return function(r){this.style.setProperty(n,r)};default:return function(r){this.setAttribute(n,r)}}}class Bn{attr;constructor(n={}){this.attr=n}get(n,t=this.attr,r){let o=(i,f)=>{if(h(f))n.attr_push(i,e(f),r);else if(f instanceof B){let u=r?`${r}_${i}`:i;n.states.push(f.call(_t(i,r),u)),o(i,f.value)}else if(U(f)){if(C(f)&&!r)this.get(n,f,i)}else n.attr_push(i,e(f),r)};b(t).forEach(([i,f])=>{if(i==="ref"){if(f instanceof a)n.events.obj({element(){f.element=this}})}else if(["on"].includes(i))U(t.on)&&n.events.obj(t.on);else{if(f===void 0)return;o(i,f)}})}unload(n){let t=void 0;if(n in this.attr)t=this.attr[n],delete this.attr[n];return t}}var ct=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],dt=(n)=>ct.includes(n);function et(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Tn=(n,t)=>{if(h(n))return n.map((r)=>Tn(r,t)).join("");else if(n instanceof w){let{ctx:r,oz:o}=jn(n,t.IDM);return t.OZ.push(o),r}else if(U(n))return Y(n);else if(Z(n))return Tn(n(),t);else if(n!==void 0&&n!==null)return et(n);return""},xn=(n,t)=>{let r=new q(t),o=new k(r.id,r);return{ctx:Tn(n,o),catt:o}};function at(n){let t=this.id;if(t){let{ctx:r,catt:o}=xn(n,t);if(this.innerHTML!==r)this.innerHTML=r,j.RPS(o.OZ)}}var Fn=(n,t,r,o=[])=>{if(h(n))n.forEach((i)=>{Fn(i,n.length,r,o)});else if(n instanceof B)if(t>1)Fn(M("div",{},n),t,r,o);else{let i=n.value,f=i instanceof w?"dom":"ctx",{ctx:u,catt:m}=xn(i,r.xid+"-0");r.xid=m.xid,o.push(u),r.OZ.push(m.OZ),r.states.push(n.call(at,f))}else o.push(Tn(n,r))};class Sn{tag;ctx;closing;constructor(n="",t){this.tag=n;this.ctx=t;let r=dt(n);this.closing=r?"":`</${n}>`}process(n,t=this.ctx,r=[]){return t.forEach((o)=>{Fn(o,t.length,n,r)}),r.join("")}get(n){let t=this.process(n);if(!this.tag)return t;if(n.events.size||n.states.length)n.id=n.xid;return`<${this.tag}${n.attr}>${t}${this.closing}`}}class Rn{e;query;constructor(n,t){this.e=n;this.query=t}get a(){return new Jn(this)}get all(){if(this.query){let n=document.querySelectorAll(this.query);if(n.length)return Array.from(n).map((t)=>t)}return[]}get attr(){let n=this.e;return{has:(t)=>{return n.hasAttribute(t)},get:(t)=>{return n.getAttribute(t)},del:(t)=>{return n.removeAttribute(t),this},set:(t)=>{for(let r in t){let o=t[r];if(t[r]!==void 0)n.setAttribute(r,e(o))}return this}}}get children(){return Array.from(this.e.children).map((n)=>E(n))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let n=this.e.offsetParent;if(n)return new D(n);return}get parent(){let n=this.e.parentElement;if(n)return new D(n);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let n=this.e.style,t=this;return{set:(r,o=0)=>{let i=n,f=()=>{b(r).forEach(([u,m])=>{if(u in i){if(i[u]!==m)i[u]=m}else if(m!==null)n.setProperty(u,String(m))})};if(Z(o))t.on("transitionend",o);if(yn(o))setTimeout(f,o);else f();return t},get:(r)=>{let o=J(String(r));return n.getPropertyValue(o)},del:(...r)=>{r.forEach((o)=>{let i=J(String(o));n.removeProperty(i)})}}}get submit(){let n=this.e;if("submit"in n)return n.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(n){let{ctx:t,oz:r}=Dn(n,Cn(this.id));this.e.insertAdjacentHTML("beforeend",t),j.RPS(r)}set appendfirst(n){let{ctx:t,oz:r}=Dn(n,Cn(this.id));this.e.insertAdjacentHTML("afterbegin",t),j.RPS(r)}set inner(n){let{ctx:t,oz:r}=Dn(n,Cn(this.id));this.e.innerHTML=t,j.RPS(r)}set disabled(n){let t=this.e;if("disabled"in t)t.disabled=n}set id(n){this.e.id=n}set value(n){let t=this.e;t.value=n}}var Dn=(n,t)=>{let{ctx:r,catt:o}=xn(n,t);return{ctx:r,oz:o.OZ}},Cn=(n)=>n?`${n}-0`:n;class D extends Rn{constructor(n,t){super(n,t)}add(...n){return this.e.classList.add(...n.map((t)=>t.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...n.map((t)=>t.replace(/[^\w-]/,"")))}}remove(...n){return this.e.classList.remove(...n.map((t)=>t.replace(/[^\w-]/,""))),this}toggle(n,t){let r=typeof n!="string"?n.apply(this):n;return this.e.classList.toggle(r,t)}hasNode(n){return this.e.contains(n)}has(...n){let t=this.e.classList;return n.every((r)=>t.contains(r))}insert(n){return{HTML:(...t)=>{return t.forEach((r)=>{this.e.insertAdjacentHTML(n,r)}),this},element:(...t)=>{return t.forEach((r)=>{this.e.insertAdjacentElement(n,r)}),this},text:function(...t){return t.forEach((r)=>{this.e.insertAdjacentText(n,r)}),this}}}is(n){let t=this.e.classList,r=this.e.tagName.toLocaleLowerCase(),o=!0,i=!0;if(n.dom)i=n.dom==r?!0:!1;if(n.class)if(Array.isArray(n.class))n.class.forEach((f)=>{o=o?t.contains(f):!1});else o=o?t.contains(n.class):!1;return o&&i}on(n,t,r=!1){let o=!1;if(n.indexOf("touch")>-1)o=!0;return this.e.addEventListener(n,t,{capture:r,passive:o}),this}remove_on(n,t,r=!1){return this.e.removeEventListener(n,t,r),this}timed(n,t=250){return setTimeout(()=>n(this),t),this}animate(n,t,r){let o={duration:300,easing:"ease",fill:"forwards"};if(Z(t))r=t;else T(o,t);let i=this.e.animate(n,o);if(r)i.finished.then(r);return this}}var v=new $,P=(n)=>{if(L)return;let t=v.get(n);if(t?.isConnected)return t;v.delete(n);let r=document.getElementById(n);if(!r)return;return v.set(n,r),r};function gt(){let n=[];for(let[t,r]of v)if(!r.isConnected)n.push(t),v.delete(t);return n}function E(n,t){let r=t?t:document;if(p(n)){let o=r.querySelector(n);if(o)return new D(o,n);return}else if(C(n)){let[[o,i]]=b(n),u=`${o==="id"?"#":"."}${i}`,m=r.querySelector(u);if(m)return new D(m,u);return}else return new D(n)}class a{state=new B(void 0);constructor(){}get element(){return this.state.value?.e}set element(n){if(n)this.state.value=new D(n);else this.state.value=void 0}get $(){return this.state.value}}var kt=()=>{return new a};var vt=(n,t,r)=>{return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}},nn={};class hn{events=new $;states=new $;windowEvents=new $;resetST=new $;resetEV=new $;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(n){let{id:t,events:r,states:o}=n;if(t){if(r.size)this.events.set(t,r);if(o.length)this.states.set(t,o)}return this}push(n){return n.events.forEach((t,r)=>{t.forEach((o,i)=>{fn(r,this.events).set(i,o)})}),n.states.forEach((t,r)=>{_(r,this.states).push(...t)}),this}get stage(){return this.events.forEach((n,t)=>{this.events.delete(t);let r=P(t);if(!r){this.events.delete(t);return}n.forEach((o,i)=>{switch(i){case"ready":case"element":o.apply(r,[r]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let f=i.replace(/^win/,"");this.windowEvents.init(f,new $).set(t,o);break;case"state":let[u,m,g]=o.apply(r,[r]),H=h(m)?m:[m];if(!H.length)break;let y=()=>H.map((F)=>F.value),z=()=>u(...y());if(g)z();H.forEach((F)=>_(t,this.resetST).push(F.call(z,t+"_state")(t)));break;default:_(t,this.resetEV).push(vt(r,i,o))}})}),this.processWindowEvents,this.states.forEach((n,t)=>{this.states.delete(t),n.forEach((r)=>{_(t,this.resetST).push(r(t))})}),this}get processWindowEvents(){let n=(t,r)=>{let o=0,i=!1,f=(m)=>{if(o=window.scrollY,!i)window.requestAnimationFrame(()=>{r.forEach((g,H)=>{let y=P(H);if(y)g.call(y,m);else this.windowEvents.get(t)?.delete(H)}),i=!1}),i=!0},u=(m)=>{r.forEach((g,H)=>{let y=P(H);if(y)g.call(y,m);else this.windowEvents.get(t)?.delete(H)})};return window.addEventListener(t,t==="scroll"?f:u),()=>{window.removeEventListener(t,t==="scroll"?f:u)}};return this.windowEvents.forEach((t,r)=>{if(t.size){if(!nn[r])nn[r]=n(r,t)}else if(nn[r])nn[r](),delete nn[r]}),this}reset(n){return n.forEach((t)=>{this.windowEvents.forEach((r,o)=>{if(r.has(t))r.delete(t)}),this.resetEV.get(t)?.forEach((r)=>{r()}),this.resetST.get(t)?.forEach((r)=>{r()}),this.resetST.delete(t),this.resetEV.delete(t)}),this}RPS(n){if(n){let t=gt();this.reset(t);let r=n.keys;if(r.length)this.reset(r).push(n).stage}return this}}var j=new hn;class k{xid;IDM;map=new $;states=[];events=new $;OZ;constructor(n,t=new q,r){this.xid=n;this.IDM=t;this.OZ=r??new hn}attr_push(n,t,r){let o=r??n;if(!this.map.has(o))this.map.set(o,[]);let i=r?`${J(n)}:${t};`:t;this.map.get(o).push(i)}get attr(){let n=[""];return this.map.forEach((t,r)=>{let o=t.join("");n.push(o?`${r}="${o}"`:r)}),n.join(" ")}set id(n){if(!this.map.has("id"))this.map.set("id",[n])}get id(){return this.map.get("id")?.join("")}}async function Tt(n,t,r){let o=new q(t),i=M("main",{class:r},n);return jn(i,o)}function jn(n,t=new q){let{tag:r,attr:o,ctx:i}=n,f=t instanceof q?t:new q(t),u=f.mid,m=new k(u,f),g=new Bn(o),H=new Sn(r,i);return g.get(m),{ctx:H.get(m),oz:m.OZ.set(m),id:m.id}}class w{tag;attr;ctx;constructor(n,t,r){this.tag=n;this.attr=t;this.ctx=r}}function M(n,t={},...r){if(Z(n))return n(t??{},...r);return new w(n,t??{},r)}var nr=(n,...t)=>new w("",{},t);async function xt(n={},t){let r=E("link[rt]")?.all.map((o)=>()=>o.remove())||[];if(n&&s(n))for(let o of G(n)){if(o.x)continue;try{await Yn(o)}catch(i){A.e=["link error",{error:"Huntr @ link"}]}}return r}var tr=["charset","name","property","http-equiv"];async function ht(n){let t={};if(E("meta")?.all.forEach((r)=>{let o=r.attributes;for(let i of tr)if(i in o){let f=o[i].value;t[`${i}_${i==="charset"?"":f}`]=r}}),n)b(n).forEach(([r,o])=>{if(r in t)E(t[r]).attr.set(o),delete t[r];else{let i=E(document.createElement("meta"));i.attr.set(o),document.head.append(i.e)}});return G(t).map((r)=>E(r).unload)}async function $t(n,t=!1){let r=E("script[rt]")?.all.map((o)=>()=>o.remove())||[];if(n&&s(n))for(let o of G(n)){if(o.x)continue;try{await ot(o)}catch(i){A.e=["script error",{error:"Huntr @ script"}]}}return r}class tn extends Un{path="";data={};args={}}async function bt(n,t=!1){if(!t&&n.fetch)T(n.data,await n.fetch());return await n.head?.(),[zn(await n.body?.()),rr.call(this,n)]}function zn(n){let t=n||"";if(Hn(n)){let r=n.default;t=Z(r)?r():r}return h(t)?t:[t]}function rr(n){let t=new d({push:{rt:this.id}});return t.htmlHead=structuredClone(this.htmlHead),t.head(n),t.htmlHead}async function Ht(n,t){document.title=n.get("title")||"",sn(await xt(n.get("link"),t)),sn(await $t(n.get("script")));let r=await ht(n.get("meta"));sn(r)}var sn=(n)=>{n.forEach((t)=>t())};class In{lang;head="";constructor(n,t){if(this.lang=n,t)this.head=rt(t)}body(n,t,r){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${t}"${r?" "+r:""}>${n}</body>`,"</html>"].join("")}}class rn{path="";data={};args={}}class An extends gn{cls;constructor(n,t){super(n);this.cls=t}}class $n extends An{}class Wn{storage=new K;error=new K}class Kn extends Wn{wss=new K;setRoute(n,t){this.storage.set(new $n(n,t))}getRoute(n,t){let[r,o]=this.storage.get(n);if(!r){let[f=new $n(n,yt)]=this.getError(t),u=new f.cls;return u.args=o,T(u,{args:o})}let i=new r.cls;return T(i,{args:o})}setWss(n){}getWss(n){return this.wss.get(n)}setError(n,t){this.error.set(new $n(n.toString(),t))}getError(n=404){return this.error.get(n.toString())}}class bn extends An{}class Vn extends Wn{setRoute(n,t){this.storage.set(new bn(n,t))}getRoute(n,t){let[r,o]=this.storage.get(n);if(!r){let[f=new bn(n,Et)]=this.getError(t),u=new f.cls;return u.args=o,T(u,{args:o})}let i=new r.cls;return T(i,{args:o})}setWss(n){}getWss(n){}setError(n,t){this.error.set(new bn(n.toString(),t))}getError(n=404){return this.error.get(n.toString())}}class yt extends tn{body(){return M("div",{},this.path+" not found...")}}class Et extends rn{body(){return M("div",{},`${this.path} not found...`)}}class Pn extends d{storage=new Kn;base;constructor(n=""){super({mark:!0});this.base=n?n.startsWith("/")?n:`/${n}`:"";let t=this.base;this.head({script:[{type:"module",src:"./index.js"}],...{base:[{href:t==="/"?t:`${t}/`,target:"_blank"}]}})}route(n){return(t)=>{return this.storage.setRoute(n,t),t}}}Q([X,x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",void 0)],Pn.prototype,"route",null);class Lt{id=R(5);path=S("");_root=S([]);Main(n){return M("main",{},this._root)}Button(n,...t){let r=this.path,{on:o,...i}=n,f={...o||{},click(u){u.preventDefault();let g=E(this).attr.get("tab");if(!g)return;r.value=g}};return M("button",{on:f,...i},...t)}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof attr==="undefined"?Object:attr]),x("design:returntype",void 0)],Lt.prototype,"Main",null),Q([X,x("design:type",Function),x("design:paramtypes",[Object,Object]),x("design:returntype",void 0)],Lt.prototype,"Button",null);class wn extends Lt{storage=new Vn;constructor(){super()}tab(n){return(t)=>{return this.storage.setRoute(n,t),t}}async load(n,t={}){this.path.value=this.path.value||n,await V(async(r)=>{this._root.value=await or.call(this,r,t)},[this.path],{id:this.id,init:!0})}}Q([X,x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",void 0)],wn.prototype,"tab",null),Q([X,x("design:type",Function),x("design:paramtypes",[String,typeof obj==="undefined"?Object:obj]),x("design:returntype",Promise)],wn.prototype,"load",null);async function or(n,t={},r=!1,o){let i=this.storage.getRoute(n,o);return T(i,{path:n,data:t}),zn(await i.body?.())}class ln{path;args;route="/";isConnected=S(!1);data={};constructor(n,t={}){this.path=n;this.args=t;this.data=t}open(n){}message(n){}close(n){}error(n){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(n)=>{this.isConnected.value=!0,await this.open.call(this,n)},this.ws.onmessage=async(n)=>{await this.message.call(this,n)},this.ws.onclose=async(n)=>{this.isConnected.value=!1,await this.close.call(this,n)},this.ws.onerror=async(n)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,n)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(n){if(this.isConnected.value)this.ws.send(n);else throw new Error(`websocket path ${this.path} not connected`)}}var l=new $;class On{Huntr;constructor(n){this.Huntr=n}async load(n){if(L)return;if(!l.has(n)){let[r,o]=this.Huntr.storage.getWss(n);if(!r)return;let{cls:i,path:f}=r,u=new i(f,o).connect;return l.set(n,u),u}let t=l.get(n);return t.reconnect,t}unload(n){if(L)return;if(l.has(n)){let t=l.get(n);if(!t)return;t.disconnect,l.delete(n)}}}class Mt extends Pn{id;data;path;_root;constructor(n=""){super(n);this.id=R(6),this.path=S("/"),this._root=S([]),this.data={}}Main(n){return M("main",{},this._root)}A(n,...t){let{on:r,...o}=n,i=this.path,f={...r||{},click(u){u.preventDefault();let m=E(this).path;i.value=m}};return M("a",{on:f,...o},...t)}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof attr==="undefined"?Object:attr]),x("design:returntype",void 0)],Mt.prototype,"Main",null),Q([X,x("design:type",Function),x("design:paramtypes",[typeof attr==="undefined"?Object:attr,Object]),x("design:returntype",void 0)],Mt.prototype,"A",null);class qt extends Mt{constructor({base:n}={}){super(n)}async render(n={}){let{id:t,data:r,class:o,isDev:i=!1}=n;if(Ln){let f=window.location.pathname;if(i)f=f.replace(/^\/|\/$/g,"");this.path.value=f;let u=document.body.id;this.id=u;let[m,g]=await Zt.call(this,this.path.value,o);return j.push(g.oz),requestAnimationFrame(()=>{j.stage,this.init(r)}),()=>{}}return async({path:f,data:u={},error:m=0})=>{if(t)this.id=t;let[g,H]=await Zt.call(this,f,o,m,u,!0);return new In(this.lang,g).body(H.ctx,this.id)}}async init(n={}){let t=this.id;V(async(r)=>{let[o,i]=await Qt.call(this,r,n);await Ht(i,t),this._root.value=o},[this.path],{id:t})}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof renderConfig==="undefined"?Object:renderConfig]),x("design:returntype",Promise)],qt.prototype,"render",null);async function Qt(n,t={},r=!1,o){let i=this.storage.getRoute(n,o);return T(i,{path:n,data:t}),await bt.call(this,i,r)}async function Zt(n,t,r,o={},i=!1){let[f,u]=await Qt.call(this,n,o,i,r);this._root.value=f;let m=await Tt(this._root,this.id,t);return[u,m]}export{ln as websocket,kt as useRef,On as socket,A as log,nr as frag,M as dom,tn as doc,Yn as cssLoader,rn as content,lt as addCSS,Xn as __,Gn as Time,wn as Tabs,B as Stateful,V as StateHook,S as State,a as Ref,pt as QState,c as Meta,Ct as IfClient,qt as Huntr,E as $};

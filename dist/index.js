var Yt=Object.defineProperty;var Gt=(n,t)=>{for(var r in t)Yt(n,r,{get:t[r],enumerable:!0,configurable:!0,set:(o)=>t[r]=()=>o})};var Q=function(n,t,r,o){var i=arguments.length,f=i<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")f=Reflect.decorate(n,t,r,o);else for(var m=n.length-1;m>=0;m--)if(u=n[m])f=(i<3?u(f):i>3?u(t,r,f):u(t,r))||f;return i>3&&f&&Object.defineProperty(t,r,f),f};var x=(n,t)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(n,t)};var Mn={};Gt(Mn,{isWindow:()=>Zn,isUndefined:()=>Dt,isStr:()=>p,isPromise:()=>Jt,isPlainObject:()=>R,isObject:()=>Bt,isObj:()=>U,isNumber:()=>N,isNum:()=>En,isNull:()=>on,isNotWindow:()=>L,isNotNull:()=>jt,isModule:()=>yn,isInt:()=>Ln,isFN:()=>Z,isDefined:()=>Rt,isClassOrId:()=>St,isBool:()=>l,isAsync:()=>Xt,isArraybuff:()=>Ft,isArr:()=>$});var Z=(n)=>typeof n==="function",Xt=(n)=>n.constructor.name==="AsyncFunction",Jt=(n)=>!!n&&typeof n.then==="function",N=(n)=>{return!isNaN(parseFloat(n))&&isFinite(n)},Bt=(n)=>{return n&&typeof n==="object"&&!Array.isArray(n)},R=(n)=>{return typeof n==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype&&!Array.isArray(n)},yn=(n)=>{return n&&typeof n==="object"&&n[Symbol.toStringTag]==="Module"},Ft=(n)=>{return n instanceof Uint8Array||n instanceof ArrayBuffer||typeof n==="string"},St=(n)=>{return n.startsWith(".")||n.startsWith("#")},l=(n)=>typeof n==="boolean",p=(n)=>typeof n==="string",$=(n)=>Array.isArray(n),U=(n)=>typeof n==="object",En=(n)=>typeof n==="number",on=(n)=>n===null,jt=(n)=>n===null,Dt=(n)=>typeof n==="undefined",Rt=(n)=>typeof n!=="undefined",Ln=(n)=>{return Number.isInteger(Number(n))},Zn=typeof window!=="undefined",L=typeof window==="undefined";var zt=(n)=>{if(L)return;return n()};function pn(n,t){b(t).forEach(([r,o])=>{_n(n,r,{value:o,writable:!1,configurable:!1,enumerable:!0})})}var qn=(n)=>{return $(n)?n:[n]};class I{static set i(n){console.info(...qn(n))}static set e(n){console.error(...qn(n))}static set w(n){console.warn(...qn(n))}}class q{_c=0;_id="";constructor(n){if(this._c=0,this._id=n??z(5),n?.includes("-")){let[t,r]=[n.split("-").slice(0,-1).join("-"),n.split("-").slice(-1)[0]];this._id=t,this._c=N(r)?parseInt(r):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var Ct=(n)=>Array.from({length:n},(t,r)=>r),cn="ABCDEFGHIJKLMNOPQRSTUVWXYZ",dn="abcdefghijklmnopqrstuvwxyz";var Y=(n)=>JSON.stringify(n),en=(n)=>{return JSON.parse(n)};var B=(n)=>{if(n.startsWith("webkit"))n="-"+n;return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},z=(n)=>{let t=cn+dn,r=Ct(10).join("");return Array.from({length:n},(o,i)=>t+(i?r:"")).reduce((o,i)=>{return o+=i.charAt(Math.floor(Math.random()*i.length))},"")},st=(n=6,t)=>{if(!t)return Math.floor(Math.random()*n);return Math.round(Math.random()*(t-n)+n)},kn=()=>{let n=[...cn,...dn],t=st(0,n.length);return n[t]};class h extends Map{obj(n){n&&b(n).forEach(([t,r])=>this.set(t,r))}map(n){n.forEach((t,r)=>{if(t instanceof h)this.set(r,t);else if($(t)){if(this.lacks(r))this.set(r,[]);this.get(r).push(...t)}else if(U(t))this.ass(r,t);else this.set(r,t)})}ass(n,t){if(!this.has(n))this.set(n,{});T(this.get(n),t)}lacks(n){return!this.has(n)}init(n,t){return this.has(n)?this.get(n):this.set(n,t).get(n)}}var{values:G,keys:W,entries:b}=Object;var{defineProperty:_n,assign:T}=Object,an=(n,t)=>Object.hasOwn(n,t),C=(n)=>{return Object.keys(n).length},fn=(n,t)=>{if(!t.has(n))t.set(n,new h);return t.get(n)},_=(n,t)=>{if(!t.has(n))t.set(n,[]);return t.get(n)},Qn=(n,t)=>{let r={added:{},removed:{},modified:{}},o=W(n),i=W(t);for(let f of i){let u=n[f],m=t[f];if(!(f in n))r.added[f]=m;else if($(u)&&$(m)){if(Y(u)!==Y(m))r.modified[f]={old:u,new:m}}else if(U(u)&&U(m)&&!on(u)&&!on(m)){let g=Qn(u,m);if(C(g.added)||C(g.removed)||C(g.modified))r.modified[f]={old:u,new:m}}else if(u!==m)r.modified[f]={old:u,new:m}}for(let f of o)if(!(f in t))r.removed[f]=n[f];return r};function vn(n,t){if(n.size!==t.size)return!1;for(let r of n)if(!t.has(r))return!1;return!0}var nt=(n)=>{return G(n).some((t)=>{return C(t)})};var X=(n,t,r)=>{let o=r.value;return{configurable:!0,get(){if(this===n.constructor.prototype)return o;let i=o.bind(this);return Object.defineProperty(this,t,{value:i,configurable:!0,writable:!0}),i}}};var A=(n,t)=>{return{name:n,content:t}},At=(n,t)=>{return{property:n,content:t}},It=(n,t)=>{return{"http-equiv":n,content:t}};class c{metas=[];constructor(n){n&&this.metas.push(A("description",n))}author(n){return this.meta=A("author",n),this}charset(n){return this.meta={charset:n},this}keywords(...n){return this.meta=A("keywords",n.join(", ")),this}viewport(n){let t=b(n).map(([r,o])=>[B(r),String(o)].join("="));return this.meta=A("viewport",t.join(", ")),this}httpEquiv(n){return b(n).forEach(([t,r])=>{this.meta=It(B(t),String(r))}),this}robots(...n){return this.meta=A("robots",n.join(", ")),this}themeColor(n){return this.meta=A("theme-color",n),this}openGraph(n){return b(n).forEach(([t,r])=>{this.meta=At("og:"+t,String(r))}),this}twitter(n){return b(n).forEach(([t,r])=>{this.meta=A("twitter:"+t,String(r))}),this}push(n){this.metas.unshift(...n)}set meta(n){this.metas.push(n)}}class Yn{}var Wt=["charset","name","property","http-equiv"],tt=(n,t,r=!1,o={})=>{t.forEach((i)=>{for(let f of Wt)if(f in i){let u=i[f];if(r)T(i,{x:!0});else if(!("x"in i))T(i,o);n[`${f}_${f==="charset"?"":u}`]=i}})},Kt=(n,t,r=!1,o={})=>{t.forEach((i)=>{if("href"in i){let f=i.href;if(r)T(i,{x:!0});else if(!("x"in i))T(i,o);n[`${f}`]=i}})};class rt{_head;idm;mark;push;constructor({initial:n,mark:t,push:r}={}){this._head=new h(n),this.mark=t||!1,this.push=r||{}}set head(n){b(n).forEach(([t,r])=>{if(t==="title"||t==="base"){if(r!==void 0){if(t=="base"){if(this.mark)T(r[0]||{},{x:!0})}this._head.set(t,r)}return}if(r instanceof c)return tt(this._head.init("meta",{}),r.metas,this.mark,this.push);if(!$(r))return;switch(t){case"meta":return tt(this._head.init("meta",{}),r,this.mark,this.push);case"link":return Kt(this._head.init("link",{}),r,this.mark,this.push);case"script":if(r.length){this._head.init(t,[]);let o=r.map((i)=>{if(!i.yid&&this.idm)i.yid="sc"+this.idm.mid;if(this.mark)T(i,{x:!0});else if(!("x"in i))T(i,this.push);return i});this._head.get(t).push(...o)}return}})}get head(){return this._head}set id(n){this.idm=new q(n)}}var Un=(n)=>{return b(n??{}).reduce((t,[r,o])=>{return t.push(l(o)&&o?r:`${r}="${o}"`),t},[""]).join(" ")},ot=(n)=>{let t=new Set;if(!n)return"";let r=[...n].reduce((o,[i,f])=>{if(i==="meta"||i==="link")f=G(f);if(p(f)){if(i==="title")t.add(`<${i}>${f}</${i}>`);else o.add(`<${i}>${f}</${i}>`);return o}if(!$(f))return o;if(i==="base"){let m=f.slice(-1);if(m)return t.add(`<${i}${Un(m[0])}>`),o}return f.map((m)=>{if(i==="script"){let g={...m},H="";if("importmap"in g)g.type="importmap",H=JSON.stringify(g.importmap),delete g.importmap;else if("body"in g)H=g.body,delete g.body;return`<${i}${Un(g)}>${H}</${i}>`}return`<${i}${Un(m)}>`}).forEach((m)=>{if(m.includes('type="module"'))t.add(m);else if(m.includes("<meta"))t.add(m);else o.add(m)}),o},new Set);return[...t,...r].join("")};class d{lang="en";htmlHead;head;constructor({mark:n,push:t}={}){this.htmlHead=new h,this.head=(r={})=>{let o=new rt({initial:this.htmlHead,mark:n,push:t}),{link:i,script:f,meta:u,title:m,description:g,css:H,js:y}=r;if(g)o.head={meta:[{name:"description",content:g}]};if(wt(o,{css:H,js:y}),"base"in r)o.head={base:r.base};o.head={script:f,title:m,meta:u,link:i},this.htmlHead=o.head}}}var wt=(n,t)=>{let{css:r,js:o}=t;if(r){let f=($(r)?r:[r]).map((u)=>({rel:"preload stylesheet",href:u,as:"style"}));n.head={link:[...f]}}if(o){let f=($(o)?o:[o]).map((u)=>({src:u}));n.head={script:[...f]}}};var Gn=async(n)=>{if(L)return;return new Promise((t,r)=>{let o=document.createElement("link");if(n.rel!=="stylesheet")n.rel="stylesheet",n.as="style";b(n).forEach(([i,f])=>{o.setAttribute(i,f)}),o.onload=()=>t(o),o.onerror=()=>r(new Error("Failed to load CSS")),document.head.appendChild(o)})};var it=(n)=>{if(L)return;return new Promise((t,r)=>{let o=document.createElement("script"),i="";if("importmap"in n)n.type="importmap",i=JSON.stringify(n.importmap),delete n.importmap;else if("body"in n)i=n.body,delete n.body;if(i)o.textContent=i;b(n).forEach(([f,u])=>{o.setAttribute(f,u)}),o.onload=()=>t(o),o.onerror=()=>r(new Error("Failed to load Script")),document.head.appendChild(o),requestAnimationFrame(()=>t("Script executed"))})},Vt=()=>{let t=document.querySelector("#d-css")?.sheet;if(t)return t;let r=document.createElement("style");return r.id="d-css",document.head.appendChild(r),r.sheet},Pt=(n,t)=>{for(let r=0;r<n.cssRules.length;r++)if(n.cssRules[r].selectorText===t)return!0;return!1},Ot=(n)=>Object.entries(n).map(([t,r])=>`${B(t)}: ${r};`).join(" ");function Nt(n,t={}){if(L)return;let r=Vt();if(!r)return;if(!Pt(r,n))r.insertRule(`${n} { ${Ot(t)} }`,r.cssRules.length)}var ft=(n,t=!1)=>{if(N(n))return[+n,Ln(n)?"int":"float"];if(t&&/\.\w+$/.test(n))return[n,"file"];if(n==="/")return[n,"-"];if(n.length===36&&n.match(/\-/g)?.length===4)return[n,"uuid"];return[n,"string"]},un=(n)=>{let t=n.startsWith("/")?n:"/"+n,r=t.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[o,i]=r.reduce(([f,u],m)=>{if(m.includes("<")){let g=m.match(/(?<=<)[^/].*?(?=>|$)/g);if(g?.length){let[H,y]=g[0].split(":");if(H)f.push(H),u.push(y||"_")}}else f.push(m===">"?"/":m);return[f,u]},[[],[]]);if(t.endsWith("/")&&t.length>1)o.push("/");return{parsed:o,args:i}};class mn{storage;constructor(){this.storage=new h}cache(n,t){if(this.storage.lacks(n))this.storage.set(n,t());return this.storage.get(n)}}var lt=["int","float","file","uuid","string"];class K{_storage;CC;constructor(){this._storage=new h,this.CC=new mn}set(n){let{parsed:t,path:r}=n,o=Y(t);if(!this._storage.get(o))this._storage.set(o,n);else throw`path: ${r} already used.`}get(n){let{parsed:t}=this.CC.cache(n,()=>un(n)),r={},o=this._storage.get(Y(t));if(!o&&n!=="/")for(let i of this._storage.keys()){let f=[],u=en(i);if(t.length===u.length){let m=u.map((y,s)=>{let S=ft(t[s],t.length-1===s);if(y===S[0])return S[0];if(lt.includes(S[1]))return f.push(S[0]),S[1];return y}),g=Y(m);if(this._storage.has(g)){o=this._storage.get(g),o?.args.forEach((y,s)=>{r[y]=f[s]});break}}}return[o,r]}keys(){return this._storage.keys()}}class gn{path="";parsed=[];args=[];constructor(n){pn(this,{path:n,...un(n)})}}class Xn{date;constructor(n){this.date=n?new Date(n):new Date}delta(n=null,t=!1){let r=Xn.delta(this.date.getTime(),n);return t?new Date(r):r}timed(n){if(!n)return this.date;return[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"]].reduce((r,[o,i])=>{let f=n[o];return f?new Date(r[`set${i}`](r[`get${i}`]()+f)):r},new Date(this.date))}static delta(n,t=null){return t?t-n:n-Date.now()}static local(n){return new Date(n).toLocaleString()}static get now(){return Date.now()}}class Jn{static rand(n=6,t){if(t)return Math.floor(Math.random()*(t-n+1)+n);return Math.floor(Math.random()*n)+1-1}static fill(n,t=null){return Array(n).fill(t)}static new({dom:n,id:t,inner:r}){let o=document.createElement(n);if(t)o.id=t;if(r)o.innerHTML=r;return o}static randFrom(n){if(Array.isArray(n)){let t=n.length,r=this.rand(0,t-1);return n[r]}else if(typeof n=="object"){let t=W(n),r=t.length,o=this.rand(0,r-1);return t[o]}}static randArray(n=[],t=1,r=!1){let o=[],i=r?new Set:null;while((r?i.size:o.length)<t){let f=n[Jn.rand(0,n.length-1)];r?i.add(f):o.push(f)}return r?[...i]:o}static randomAZ=kn;static makeID=z;static class(n,...t){let r=t;if(n?.class)r.push(...$(n.class)?n.class:[n.class]);n.class=t}static get O(){return{vals:G,keys:W,items:b,has:an,ass:T,len:(n={})=>W(n).length}}static get is(){return Mn}static get return(){return ut}static sleep=(n=1000)=>new Promise((t)=>setTimeout(t,n));static get screen(){let{innerWidth:n}=window,t={xs:n<=480,sm:n>=480,smd:n>=624,md:n>=768,lg:n>=1024,xl:n>=1280,xxl:n>=1536},r=b(t).reverse();for(let o=0;o<r.length;o++){let[i,f]=r[o];if(f)return i}return}bytes(n){if(n===0)return"0 Bytes";let t=1024,r=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,o)).toFixed(2))+" "+r[o]}static format(n){return new mt(n)}}class ut{static arr(n){return n?$(n)?n:[n]:[]}static num(n,t=0){let r=parseFloat(n);return isNaN(r)?t:r}static str(n){return String(n)}static arr2obj(n,t=!1){return n.reduce((r,o,i)=>{if(t)r[o]=i;else r[i]=o;return r},{})}}class mt{val;constructor(n){this.val=n}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}async function w(n,t,{id:r="stateHook",init:o}={}){let i=[],f=()=>t.map((m)=>m.value),u=async()=>{await n(...f())};if(t.forEach((m)=>{i.push(m.hook(u)(r))}),o)await u();return()=>{i.forEach((m)=>m())}}var gt=(n)=>{n.forEach((t)=>t())};var pt=(n,t)=>{for(let[r,o]of n){let i=V(r);if(!i){n.delete(r);continue}o.forEach((f)=>{f.call(i,t)})}};class F extends EventTarget{options;deep;verify;hooks=new h;states=new h;_value;listening=!1;end;constructor(n,t={},r=!0,o=!0){super();this.options=t;this.deep=r;this.verify=o;this._value=n}get value(){return this._value}set value(n){if(!this.verify){this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(R(this._value)||$(this._value)){let t=Qn(this._value,n);if(!nt(t))return}else if(this._value instanceof Set){if(!vn(this._value,n))return}else if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let n=(t)=>{if(gt(this.hooks),pt(this.states,t.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",n,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",n,this.options),this.end=void 0,this.listening=!1}}call(n,t){return(r)=>{if(fn(r,this.states).set(t,n),!L&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(r))this.states.get(r)?.delete(t)}}}hook(n){return(t)=>{if(this.hooks.set(t,n),!L&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(t))this.hooks.delete(t)}}}}function J(n,t={}){return new F(n,t,!0)}function _t(n,t=!1){return new F(n,{},!1,t)}class Bn{e;opt;constructor(n){this.e=n;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(n,t={}){return this.e.animate(n,t)}get slide(){let n=({x:t=0,y:r=0},o={})=>{T(this.opt,o);let i=[[t,r],[0,0]].map(([f,u])=>({transform:`translateX(${f}rem) translateY(${u}rem)`}));return this.e.animate(i,this.opt),this};return{left:(t={})=>{return n({x:-2},t)},right:(t={})=>{return n({x:2},t)},up:(t={})=>{return n({y:2},t)},down:(t={})=>{return n({y:-2},t)}}}fade(n={}){T(this.opt,n);let t=[0,1].map((r)=>({opacity:r}));return this.e.animate(t,this.opt),this}shake(n="Y",t={}){T(this.opt,t);let r=[0,5,-5,5,0].map((o)=>({transform:`translate${n}(${o}px)`}));return this.e.animate(r,this.opt),this}color(n=[],t={}){T(this.opt,t);let r=Array.isArray(n)?n.map((o)=>({color:o})):{color:n};return this.e.animate(r,this.opt),this}bg(n=[],t={}){T(this.opt,t);let r=Array.isArray(n)?n.map((o)=>({backgroundColor:o})):{backgroundColor:n};return this.e.animate(r,this.opt),this}bounce(n=1,t={}){T(this.opt,t);let r=[0.5,n,1].map((o)=>({transform:`scale(${o})`}));return this.e.animate(r),this}}var e=(n)=>{if($(n))return n.filter((t)=>t!==void 0).join(" ");else if(U(n)){if(R(n))return Y(n)}else if(Z(n))return e(n());else if(n!==void 0&&n!==null)return l(n)?n?"":"false":String(n);return""};function ct(n,t){switch(t??n){case"style":return function(r){this.style.setProperty(n,r)};default:return function(r){this.setAttribute(n,r)}}}class Fn{attr;constructor(n={}){this.attr=n}get(n,t=this.attr,r){let o=(i,f)=>{if($(f))n.attr_push(i,e(f),r);else if(f instanceof F){let u=r?`${r}_${i}`:i;n.states.push(f.call(ct(i,r),u)),o(i,f.value)}else if(U(f)){if(R(f)&&!r)this.get(n,f,i)}else n.attr_push(i,e(f),r)};b(t).forEach(([i,f])=>{if(i==="ref"){if(f instanceof k)n.events.obj({element(){f.element=this}})}else if(["on"].includes(i))U(t.on)&&n.events.obj(t.on);else{if(f===void 0)return;o(i,f)}})}unload(n){let t=void 0;if(n in this.attr)t=this.attr[n],delete this.attr[n];return t}}var dt=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],et=(n)=>dt.includes(n);function kt(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Tn=(n,t)=>{if($(n))return n.map((r)=>Tn(r,t)).join("");else if(n instanceof P){let{ctx:r,oz:o}=Dn(n,t.IDM);return t.OZ.push(o),r}else if(U(n))return Y(n);else if(Z(n))return Tn(n(),t);else if(n!==void 0&&n!==null)return kt(n);return""},xn=(n,t)=>{let r=new q(t),o=new a(r.id,r);return{ctx:Tn(n,o),catt:o}};function at(n){let t=this.id;if(t){let{ctx:r,catt:o}=xn(n,t);if(this.innerHTML!==r)this.innerHTML=r,j.RPS(o.OZ)}}var Sn=(n,t,r,o=[])=>{if($(n))n.forEach((i)=>{Sn(i,n.length,r,o)});else if(n instanceof F)if(t>1)Sn(M("div",{},n),t,r,o);else{let i=n.value,f=i instanceof P?"dom":"ctx",{ctx:u,catt:m}=xn(i,r.xid+"-0");r.xid=m.xid,o.push(u),r.OZ.push(m.OZ),r.states.push(n.call(at,f))}else o.push(Tn(n,r))};class jn{tag;ctx;closing;constructor(n="",t){this.tag=n;this.ctx=t;let r=et(n);this.closing=r?"":`</${n}>`}process(n,t=this.ctx,r=[]){return t.forEach((o)=>{Sn(o,t.length,n,r)}),r.join("")}get(n){let t=this.process(n);if(!this.tag)return t;if(n.events.size||n.states.length)n.id=n.xid;return`<${this.tag}${n.attr}>${t}${this.closing}`}}class Cn{e;query;constructor(n,t){this.e=n;this.query=t}get a(){return new Bn(this)}get all(){if(this.query){let n=document.querySelectorAll(this.query);if(n.length)return Array.from(n).map((t)=>t)}return[]}get attr(){let n=this.e;return{has:(t)=>{return n.hasAttribute(t)},get:(t)=>{return n.getAttribute(t)},del:(t)=>{return n.removeAttribute(t),this},set:(t)=>{for(let r in t){let o=t[r];if(t[r]!==void 0)n.setAttribute(r,e(o))}return this}}}get children(){return Array.from(this.e.children).map((n)=>E(n))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let n=this.e.offsetParent;if(n)return new D(n);return}get parent(){let n=this.e.parentElement;if(n)return new D(n);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let n=this.e.style,t=this;return{set:(r,o=0)=>{let i=n,f=()=>{b(r).forEach(([u,m])=>{if(u in i){if(i[u]!==m)i[u]=m}else if(m!==null)n.setProperty(u,String(m))})};if(Z(o))t.on("transitionend",o);if(En(o))setTimeout(f,o);else f();return t},get:(r)=>{let o=B(String(r));return n.getPropertyValue(o)},del:(...r)=>{r.forEach((o)=>{let i=B(String(o));n.removeProperty(i)})}}}get submit(){let n=this.e;if("submit"in n)return n.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(n){let{ctx:t,oz:r}=Rn(n,zn(this.id));this.e.insertAdjacentHTML("beforeend",t),j.RPS(r)}set appendfirst(n){let{ctx:t,oz:r}=Rn(n,zn(this.id));this.e.insertAdjacentHTML("afterbegin",t),j.RPS(r)}set inner(n){let{ctx:t,oz:r}=Rn(n,zn(this.id));this.e.innerHTML=t,j.RPS(r)}set disabled(n){let t=this.e;if("disabled"in t)t.disabled=n}set id(n){this.e.id=n}set value(n){let t=this.e;t.value=n}}var Rn=(n,t)=>{let{ctx:r,catt:o}=xn(n,t);return{ctx:r,oz:o.OZ}},zn=(n)=>n?`${n}-0`:n;class D extends Cn{constructor(n,t){super(n,t)}add(...n){return this.e.classList.add(...n.map((t)=>t.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...n.map((t)=>t.replace(/[^\w-]/,"")))}}remove(...n){return this.e.classList.remove(...n.map((t)=>t.replace(/[^\w-]/,""))),this}toggle(n,t){let r=typeof n!="string"?n.apply(this):n;return this.e.classList.toggle(r,t)}hasNode(n){return this.e.contains(n)}has(...n){let t=this.e.classList;return n.every((r)=>t.contains(r))}insert(n){return{HTML:(...t)=>{return t.forEach((r)=>{this.e.insertAdjacentHTML(n,r)}),this},element:(...t)=>{return t.forEach((r)=>{this.e.insertAdjacentElement(n,r)}),this},text:function(...t){return t.forEach((r)=>{this.e.insertAdjacentText(n,r)}),this}}}is(n){let t=this.e.classList,r=this.e.tagName.toLocaleLowerCase(),o=!0,i=!0;if(n.dom)i=n.dom==r?!0:!1;if(n.class)if(Array.isArray(n.class))n.class.forEach((f)=>{o=o?t.contains(f):!1});else o=o?t.contains(n.class):!1;return o&&i}on(n,t,r=!1){let o=!1;if(n.indexOf("touch")>-1)o=!0;return this.e.addEventListener(n,t,{capture:r,passive:o}),this}remove_on(n,t,r=!1){return this.e.removeEventListener(n,t,r),this}timed(n,t=250){return setTimeout(()=>n(this),t),this}animate(n,t,r){let o={duration:300,easing:"ease",fill:"forwards"};if(Z(t))r=t;else T(o,t);let i=this.e.animate(n,o);if(r)i.finished.then(r);return this}}var v=new h,V=(n)=>{if(L)return;let t=v.get(n);if(t?.isConnected)return t;v.delete(n);let r=document.getElementById(n);if(!r)return;return v.set(n,r),r};function Tt(){let n=[];for(let[t,r]of v)if(!r.isConnected)n.push(t),v.delete(t);return n}function E(n,t){let r=t?t:document;if(p(n)){let o=r.querySelector(n);if(o)return new D(o,n);return}else if(R(n)){let[[o,i]]=b(n),u=`${o==="id"?"#":"."}${i}`,m=r.querySelector(u);if(m)return new D(m,u);return}else return new D(n)}class k{state=new F(void 0);constructor(){}get element(){return this.state.value?.e}set element(n){if(n)this.state.value=new D(n);else this.state.value=void 0}get $(){return this.state.value}}var vt=()=>{return new k};var nr=(n,t,r)=>{return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}},nn={};class $n{events=new h;states=new h;windowEvents=new h;resetST=new h;resetEV=new h;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(n){let{id:t,events:r,states:o}=n;if(t){if(r.size)this.events.set(t,r);if(o.length)this.states.set(t,o)}return this}push(n){return n.events.forEach((t,r)=>{t.forEach((o,i)=>{fn(r,this.events).set(i,o)})}),n.states.forEach((t,r)=>{_(r,this.states).push(...t)}),this}get stage(){return this.events.forEach((n,t)=>{this.events.delete(t);let r=V(t);if(!r){this.events.delete(t);return}n.forEach((o,i)=>{switch(i){case"ready":case"element":o.apply(r,[r]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let f=i.replace(/^win/,"");this.windowEvents.init(f,new h).set(t,o);break;case"state":let[u,m,g]=o.apply(r,[r]),H=$(m)?m:[m];if(!H.length)break;let y=()=>H.map((S)=>S.value),s=()=>u(...y());if(g)s();H.forEach((S)=>_(t,this.resetST).push(S.call(s,t+"_state")(t)));break;default:_(t,this.resetEV).push(nr(r,i,o))}})}),this.processWindowEvents,this.states.forEach((n,t)=>{this.states.delete(t),n.forEach((r)=>{_(t,this.resetST).push(r(t))})}),this}get processWindowEvents(){let n=(t,r)=>{let o=0,i=!1,f=(m)=>{if(o=window.scrollY,!i)window.requestAnimationFrame(()=>{r.forEach((g,H)=>{let y=V(H);if(y)g.call(y,m);else this.windowEvents.get(t)?.delete(H)}),i=!1}),i=!0},u=(m)=>{r.forEach((g,H)=>{let y=V(H);if(y)g.call(y,m);else this.windowEvents.get(t)?.delete(H)})};return window.addEventListener(t,t==="scroll"?f:u),()=>{window.removeEventListener(t,t==="scroll"?f:u)}};return this.windowEvents.forEach((t,r)=>{if(t.size){if(!nn[r])nn[r]=n(r,t)}else if(nn[r])nn[r](),delete nn[r]}),this}reset(n){return n.forEach((t)=>{this.windowEvents.forEach((r,o)=>{if(r.has(t))r.delete(t)}),this.resetEV.get(t)?.forEach((r)=>{r()}),this.resetST.get(t)?.forEach((r)=>{r()}),this.resetST.delete(t),this.resetEV.delete(t)}),this}RPS(n){if(n){let t=Tt();this.reset(t);let r=n.keys;if(r.length)this.reset(r).push(n).stage}return this}}var j=new $n;class a{xid;IDM;map=new h;states=[];events=new h;OZ;constructor(n,t=new q,r){this.xid=n;this.IDM=t;this.OZ=r??new $n}attr_push(n,t,r){let o=r??n;if(!this.map.has(o))this.map.set(o,[]);let i=r?`${B(n)}:${t};`:t;this.map.get(o).push(i)}get attr(){let n=[""];return this.map.forEach((t,r)=>{let o=t.join("");n.push(o?`${r}="${o}"`:r)}),n.join(" ")}set id(n){if(!this.map.has("id"))this.map.set("id",[n])}get id(){return this.map.get("id")?.join("")}}async function xt(n,t,r){let o=new q(t),i=M("main",{class:r},n);return Dn(i,o)}function Dn(n,t=new q){let{tag:r,attr:o,ctx:i}=n,f=t instanceof q?t:new q(t),u=f.mid,m=new a(u,f),g=new Fn(o),H=new jn(r,i);return g.get(m),{ctx:H.get(m),oz:m.OZ.set(m),id:m.id}}class P{tag;attr;ctx;constructor(n,t,r){this.tag=n;this.attr=t;this.ctx=r}}function M(n,t={},...r){if(Z(n))return n(t??{},...r);return new P(n,t??{},r)}var tr=(n,...t)=>new P("",{},t);async function $t(n={},t){let r=E("link[rt]")?.all.map((o)=>()=>o.remove())||[];if(n&&C(n))for(let o of G(n)){if(o.x)continue;try{await Gn(o)}catch(i){I.e=["link error",{error:"Huntr @ link"}]}}return r}var rr=["charset","name","property","http-equiv"];async function ht(n){let t={};if(E("meta")?.all.forEach((r)=>{let o=r.attributes;for(let i of rr)if(i in o){let f=o[i].value;t[`${i}_${i==="charset"?"":f}`]=r}}),n)b(n).forEach(([r,o])=>{if(r in t)E(t[r]).attr.set(o),delete t[r];else{let i=E(document.createElement("meta"));i.attr.set(o),document.head.append(i.e)}});return G(t).map((r)=>E(r).unload)}async function bt(n,t=!1){let r=E("script[rt]")?.all.map((o)=>()=>o.remove())||[];if(n&&C(n))for(let o of G(n)){if(o.x)continue;try{await it(o)}catch(i){I.e=["script error",{error:"Huntr @ script"}]}}return r}class tn extends Yn{path="";data={};args={};importArgs=[]}async function Ht(n,t=!1){if(!t&&n.fetch)T(n.data,await n.fetch());return await n.head?.(),[An(await n.body?.(),n.importArgs),or.call(this,n)]}function An(n,t=[]){let r=n||"";if(yn(n)){let o=n.default;r=Z(o)?o.apply({},t):o}return $(r)?r:[r]}function or(n){let t=new d({push:{rt:this.id}});return t.htmlHead=structuredClone(this.htmlHead),t.head(n),t.htmlHead}async function yt(n,t){document.title=n.get("title")||"",sn(await $t(n.get("link"),t)),sn(await bt(n.get("script")));let r=await ht(n.get("meta"));sn(r)}var sn=(n)=>{n.forEach((t)=>t())};class hn{onChange;popListener;constructor(n=J(""),t){this.assertClient(),this.onChange=t,this.onChange?.(this.path(),history.state??{path:this.path()}),this.popListener=(r)=>{let o=r.state??{path:this.path()};n.value=o?.path||n.value,this.onChange?.(this.path(),o)},window.addEventListener("popstate",this.popListener)}path(){this.assertClient();let{pathname:n,search:t,hash:r}=window.location;return`${n}${t}${r}`}state(){return this.assertClient(),window.history.state??{path:this.path()}}navigate(n,t,r=""){this.assertClient();let o=this.resolve(n),i=this.path();if(this.samePath(i,o))return;let f={...t,path:o};window.history.pushState(f,r,o),this.onChange?.(this.path(),f)}replace(n,t,r=""){this.assertClient();let o=this.resolve(n),i=this.path();if(this.samePath(i,o))return;let f={...t,path:o};window.history.replaceState(f,r,o),this.onChange?.(this.path(),f)}back(){this.assertClient(),window.history.back()}forward(){this.assertClient(),window.history.forward()}destroy(){if(this.popListener)window.removeEventListener("popstate",this.popListener),this.popListener=void 0}resolve(n){let t=new URL(n,window.location.origin);return`${t.pathname}${t.search}${t.hash}`}samePath(n,t){return n===t}assertClient(){if(typeof window==="undefined"||typeof window.history==="undefined")throw new Error("BrowserPathHistory must be used in a client/browser environment.")}}class In{lang;head="";constructor(n,t){if(this.lang=n,t)this.head=ot(t)}body(n,t,r){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${t}"${r?" "+r:""}>${n}</body>`,"</html>"].join("")}}class rn{path="";data={};args={}}class Wn extends gn{cls;constructor(n,t){super(n);this.cls=t}}class bn extends Wn{}class Kn{storage=new K;error=new K}class wn extends Kn{wss=new K;setRoute(n,t){this.storage.set(new bn(n,t))}getRoute(n,t){let[r,o]=this.storage.get(n);if(!r){let[f=new bn(n,Et)]=this.getError(t),u=new f.cls;return u.args=o,T(u,{args:o})}let i=new r.cls;return T(i,{args:o})}setWss(n){}getWss(n){return this.wss.get(n)}setError(n,t){this.error.set(new bn(n.toString(),t))}getError(n=404){return this.error.get(n.toString())}}class Hn extends Wn{}class Vn extends Kn{setRoute(n,t){this.storage.set(new Hn(n,t))}getRoute(n,t){let[r,o]=this.storage.get(n);if(!r){let[f=new Hn(n,Lt)]=this.getError(t),u=new f.cls;return u.args=o,T(u,{args:o})}let i=new r.cls;return T(i,{args:o})}setWss(n){}getWss(n){}setError(n,t){this.error.set(new Hn(n.toString(),t))}getError(n=404){return this.error.get(n.toString())}}class Et extends tn{body(){return M("div",{},this.path+" not found...")}}class Lt extends rn{body(){return M("div",{},`${this.path} not found...`)}}class Pn extends d{storage=new wn;base;constructor(n="/",t=""){super({mark:!0});let r=t?`${t}/`:"";this.base=n?n.startsWith("/")?n:`/${n}`:"";let o=this.base;this.head({script:[{type:"module",src:"./index.js"}],...{base:[{href:o==="/"?o:`${o}/`,target:"_blank"}]},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]})}route(n){return(t)=>{return this.storage.setRoute(n,t),t}}}Q([X,x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",void 0)],Pn.prototype,"route",null);class Zt{id=z(5);path=J("");_root=J([]);Main(n){return M("main",{},this._root)}Button(n,...t){let r=this.path,{on:o,...i}=n,f={...o||{},click(u){u.preventDefault();let g=E(this).attr.get("tab");if(!g)return;r.value=g}};return M("button",{on:f,...i},...t)}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof attr==="undefined"?Object:attr]),x("design:returntype",void 0)],Zt.prototype,"Main",null),Q([X,x("design:type",Function),x("design:paramtypes",[Object,Object]),x("design:returntype",void 0)],Zt.prototype,"Button",null);class On extends Zt{storage=new Vn;constructor(){super()}tab(n){return(t)=>{return this.storage.setRoute(n,t),t}}async load(n,t={}){this.path.value=this.path.value||n,await w(async(r)=>{this._root.value=await ir.call(this,r,t)},[this.path],{id:this.id,init:!0})}}Q([X,x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",void 0)],On.prototype,"tab",null),Q([X,x("design:type",Function),x("design:paramtypes",[String,typeof obj==="undefined"?Object:obj]),x("design:returntype",Promise)],On.prototype,"load",null);async function ir(n,t={},r=!1,o){let i=this.storage.getRoute(n,o);return T(i,{path:n,data:t}),An(await i.body?.())}class Nn{path;args;route="/";isConnected=J(!1);data={};constructor(n,t={}){this.path=n;this.args=t;this.data=t}open(n){}message(n){}close(n){}error(n){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(n)=>{this.isConnected.value=!0,await this.open.call(this,n)},this.ws.onmessage=async(n)=>{await this.message.call(this,n)},this.ws.onclose=async(n)=>{this.isConnected.value=!1,await this.close.call(this,n)},this.ws.onerror=async(n)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,n)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(n){if(this.isConnected.value)this.ws.send(n);else throw new Error(`websocket path ${this.path} not connected`)}}var O=new h;class ln{Huntr;constructor(n){this.Huntr=n}async load(n){if(L)return;if(!O.has(n)){let[r,o]=this.Huntr.storage.getWss(n);if(!r)return;let{cls:i,path:f}=r,u=new i(f,o).connect;return O.set(n,u),u}let t=O.get(n);return t.reconnect,t}unload(n){if(L)return;if(O.has(n)){let t=O.get(n);if(!t)return;t.disconnect,O.delete(n)}}}class qt extends Pn{pushHistory;id;data;path;_root;constructor(n="/",t="",r=!1){super(n,t);this.pushHistory=r;this.id=z(6),this.path=J("/"),this._root=J([]),this.data={}}Main(n){return M("main",{},this._root)}A(n,...t){let{on:r,...o}=n,i=this.path,f={...r||{},click(u){u.preventDefault();let m=E(this).path;i.value=m}};return M("a",{on:f,...o},...t)}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof attr==="undefined"?Object:attr]),x("design:returntype",void 0)],qt.prototype,"Main",null),Q([X,x("design:type",Function),x("design:paramtypes",[typeof aAttr==="undefined"?Object:aAttr,Object]),x("design:returntype",void 0)],qt.prototype,"A",null);class Qt extends qt{constructor({base:n,history:t,index:r}={}){super(n,r,t);let o=this;T(this,{get huntr(){return o}})}async render(n={}){let{id:t,data:r,class:o,isDev:i=!1}=n;if(Zn){let f=window.location.pathname;if(i)f=f.replace(/^\/|\/$/g,"");this.path.value=f;let u=document.body.id;this.id=u;let[m,g]=await Mt.call(this,this.path.value,o);return j.push(g.oz),requestAnimationFrame(()=>{j.stage,this.init(r)}),()=>{}}return async({path:f,data:u={},error:m=0})=>{if(t)this.id=t;let[g,H]=await Mt.call(this,f,o,m,u,!0);return new In(this.lang,g).body(H.ctx,this.id)}}async init(n={}){let t=this.id,r=new hn(this.path);w(async(o)=>{let[i,f]=await Ut.call(this,o,n);await yt(f,t),this._root.value=i,this.pushHistory&&r.navigate(o)},[this.path],{id:t})}}Q([X,x("design:type",Function),x("design:paramtypes",[typeof renderConfig==="undefined"?Object:renderConfig]),x("design:returntype",Promise)],Qt.prototype,"render",null);async function Ut(n,t={},r=!1,o){let i=this.storage.getRoute(n,o);return T(i,{path:n,data:t}),await Ht.call(this,i,r)}async function Mt(n,t,r,o={},i=!1){let[f,u]=await Ut.call(this,n,o,i,r);this._root.value=f;let m=await xt(this._root,this.id,t);return[u,m]}var fr=(n)=>{return(t)=>{n(t)}};export{Nn as websocket,vt as useRef,ln as socket,I as log,tr as frag,M as dom,tn as doc,Gn as cssLoader,rn as content,Nt as addCSS,Jn as __,Xn as Time,On as Tabs,F as Stateful,w as StateHook,J as State,fr as Routes,k as Ref,_t as QState,hn as PathHistory,c as Meta,zt as IfClient,Qt as Huntr,E as $};
